(window.webpackJsonp=window.webpackJsonp||[]).push([["Chat~RedesignChat"],{"./src/chat/actions/apiRequestHeaders.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var s=n("./src/lib/makeActionCreator/index.ts");const c="API_REQUEST_HEADERS__set";Object(s.a)(c)},"./src/chat/actions/channel.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return A}),n.d(t,"d",function(){return M}),n.d(t,"e",function(){return L}),n.d(t,"p",function(){return R}),n.d(t,"o",function(){return H}),n.d(t,"q",function(){return P}),n.d(t,"g",function(){return U}),n.d(t,"c",function(){return B}),n.d(t,"w",function(){return G}),n.d(t,"x",function(){return K}),n.d(t,"y",function(){return F}),n.d(t,"u",function(){return V}),n.d(t,"j",function(){return z}),n.d(t,"k",function(){return q}),n.d(t,"h",function(){return $}),n.d(t,"i",function(){return Q}),n.d(t,"a",function(){return J}),n.d(t,"b",function(){return W}),n.d(t,"t",function(){return Y}),n.d(t,"r",function(){return Z}),n.d(t,"m",function(){return X}),n.d(t,"v",function(){return ee}),n.d(t,"n",function(){return te}),n.d(t,"l",function(){return ne}),n.d(t,"s",function(){return se}),n.d(t,"M",function(){return ce}),n.d(t,"L",function(){return re}),n.d(t,"z",function(){return ie}),n.d(t,"D",function(){return de}),n.d(t,"T",function(){return be}),n.d(t,"S",function(){return me}),n.d(t,"R",function(){return pe}),n.d(t,"O",function(){return Ee}),n.d(t,"K",function(){return Ce}),n.d(t,"C",function(){return xe}),n.d(t,"B",function(){return Ne}),n.d(t,"I",function(){return ke}),n.d(t,"P",function(){return Me}),n.d(t,"F",function(){return Ge}),n.d(t,"G",function(){return Fe}),n.d(t,"H",function(){return Ve}),n.d(t,"E",function(){return qe}),n.d(t,"A",function(){return $e}),n.d(t,"N",function(){return Qe}),n.d(t,"J",function(){return Je}),n.d(t,"Q",function(){return Ze});var s=n("./node_modules/lodash/isEqual.js"),c=n.n(s),a=n("./node_modules/react-router-redux/es/index.js"),r=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/actions/channel/subreddit.ts"),i=n("./src/chat/actions/members.ts"),d=n("./src/chat/actions/message/index.ts"),u=n("./src/chat/actions/message/unreadCount.ts"),l=n("./src/chat/actions/tracking.ts"),b=n("./src/chat/actions/user.ts"),h=n("./src/chat/actions/sidebar.ts"),f=n("./src/chat/constants/batchSizes.ts"),m=n("./src/chat/constants/channels.ts"),O=n("./src/chat/constants/sendbird.ts"),j=n("./src/chat/endpoints/sendbird/index.ts"),p=n("./src/chat/helpers/errors.ts"),g=n("./src/chat/helpers/urls/index.ts"),y=n("./src/chat/models/Channel/index.ts"),_=n("./src/chat/models/Channel/platform.ts"),E=n("./src/chat/models/Channel/utils/index.ts"),C=n("./src/chat/models/Message/index.ts"),v=n("./src/chat/models/Subreddit/index.ts"),I=n("./src/chat/selectors/channels.ts"),S=n("./src/chat/selectors/channels/next.tsx"),w=n("./src/chat/selectors/experiments.ts"),x=n("./src/chat/selectors/platform.ts"),N=n("./src/chat/selectors/promos.ts"),k=n("./src/chat/selectors/sidebar.ts"),D=n("./src/chat/selectors/subreddit.ts"),T=n("./src/chat/singleton/SendbirdSDK.ts");const A="CHANNEL__ADD_SUCCESS",M="CHANNEL__ADD_FAIL",L="CHANNEL__CREATE_CHANNEL_START",R="CHANNEL__SELECT_BEGIN",H="CHANNEL__RESET_UNREAD_COUNT",P="CHANNEL__SELECT_END",U="CHANNEL__EXPAND_INVITE_LIST",B="CHANNEL__COLLAPSE_INVITE_LIST",G="CHANNEL__UPDATE_MODEL",K="CHANNEL__INVITED_UPDATE",F="CHANNEL__JOINED_UPDATE",V="CHANNEL__SET_UPDATED_CHANNEL_ON_TOP",z="CHANNEL__FETCHING_JOINED_CHANNELS",q="CHANNEL__FETCHING_JOINED_CHANNELS_FAILED",$="CHANNEL__FETCHING_INVITED_CHANNELS",Q="CHANNEL__FETCHING_INVITED_CHANNELS_FAILED",J="CHANNEL__ADD_EXISTING_INVITED_CHANNELS",W="CHANNEL__ADD_EXISTING_JOINED_CHANNELS",Y="CHANNEL__SET_INVITED_CHANNEL_TO_JOINED",Z="CHANNEL__SET_EXISTING_CHANNELS_END",X="CHANNEL__REMOVE_CHANNEL",ee="CHANNEL__UNSORT_CHANNEL",te="CHANNEL__RESET_CHANNEL_MESSAGE_LIST",ne="CHANNEL__FETCH_FIRST_MESSAGE",se="CHANNEL__SET_FIRST_MESSAGE_ID",ce=Object(r.a)(X),ae=Object(r.a)(ee),re=(e,t)=>async(n,s)=>{const c=s();n(Object(I.L)(c,e)?ae({channelId:e,subredditName:t}):ce({channelId:e,subredditName:t}))},oe=Object(r.a)(Y),ie=e=>async(t,n)=>{const s=n(),c=s.channels.selected,r=s.contacts.models,o=e||c.channelId;if(!o)throw new p.a("accepted channelId",e);const i=Object(I.k)(s),u=i&&i.firstMessageId,l=!!(i&&u&&i.hasMoreMessages),b=Object(I.b)(s,r),h=Object(N.a)(s);b&&h?t(Object(a.b)(Object(g.channelAction)(o,m.a.VIEW_NSFW_CONFIRMATION))):await T.b.acceptChannelInvite().then(()=>l&&t(Object(d.p)(u))).then(()=>t(oe({channelId:o}))).then(()=>t(Object(a.b)(Object(g.channelUrl)(o))))},de=e=>async(t,n)=>{const s=n(),c=Object(I.B)(s,"channelState"),a=Object(I.B)(s,"channelId"),r=s.channels.models[a];if(!a)throw new p.a("declinedChannelId",a);if(!c)throw new p.a("declinedChannelType",c);try{await T.b.declineChannelInvite()}catch(o){return Object(p.b)(`Error declining channel: ${o.message}`)}t(Ce(a)),t(((e,t)=>async n=>n(re(e,t)))(a,e)),t(De(r.channelState))},ue=Object(r.a)(K),le=Object(r.a)(F),be=Object(r.a)(G),he=e=>async t=>{if(e.type===y.a.Subreddit){const n=Object(v.c)([e]);await t(Object(o.o)(n)),t(Object(o.w)({channel:e}))}else await t(ue({channel:e})),t((e=>async(t,n)=>{const s=n().user.account.id,c=e.members.filter(e=>e.id!==s).map(e=>e.id);t(Object(b.w)(c))})(e))},fe=e=>async(t,n)=>{const s=n(),c=e.channelId,a=(e=>{if(e.type===y.a.Subreddit){const t=e.customData.subreddit;return t&&t.name}})(e),r=Object(I.x)(s);r&&r.channelId===e.channelId&&(await t(ce({channelId:c,subredditName:a})),await t(be({channel:e})),t(De(r.channelState)))},me=(e,t)=>async(n,s)=>{if(e){const a=s(),r=Object(I.h)(a,e.channelId);if(e.channelState!==m.b.INVITED&&!r||t)return;if(e=Oe(a,e),c()(e,r))return;switch(e.channelState){case m.b.INVITED:await n(he(e));break;case m.b.UNSORTED:await n(fe(e));break;case m.b.JOINED:await n(le({channel:e}));break;default:Object(p.b)("Error updating channel. ChannelState not found.")}n(Object(u.b)())}},Oe=(e,t)=>{const n=Object(x.d)(e),s=Object(I.h)(e,t.channelId),c=n===t.channelId,a=t.type===y.a.Subreddit;return c&&(t.unreadMessageCount=0),!c&&a&&(t.unreadMessageCount=t.unreadMessageCount?1:0),s&&a&&(t.lastMessage=s.lastMessage,t.isMessageListLoaded=s.isMessageListLoaded,t.hasMoreMessages=s.hasMoreMessages),t},je=Object(r.a)(V),pe=e=>async(t,n)=>{const s=e.channelId;e.type!==y.a.Subreddit&&t(je({channelId:s}))},ge=Object(r.a)(H),ye=Object(r.a)(R),_e=Object(r.a)(P),Ee=()=>async(e,t)=>{const n=t(),s=Object(x.d)(n),c=Object(x.c)(n),r=m.a.DENY,o=m.a.VIEW_JOIN;if(!n.platform.currentPage)return;const u=n.sidebarTabs.activeIndex;s&&e(Object(h.e)({channelId:s,tabIndex:u}));const l=s&&Object(I.h)(n,s),b=l&&Object(D.b)(n,l.channelId),f=b&&b.name||void 0;if(!l&&c===r)return;const j=!(!l||l.channelState!==m.b.UNSORTED),p=!(!s||!Object(I.M)(n,s));if((p||j)&&l&&!c)return void e(Object(a.b)(Object(g.channelAction)(l.channelId,o,f)));const y=!(!l||l.channelState!==m.b.JOINED);if(l&&y&&c&&m.g.includes(c))e(Object(a.b)(Object(g.channelUrl)(l.channelId,f)));else if(l&&s){e(ye({channelId:s}));const t=p||j,n=await T.b.enterChannel(l,!1,t);if(n&&!n.error){const t=n.data.messageListData;await e(Object(d.m)(t)),await e(_e()),e(Ce(s)),e(Object(i.f)())}else e(Object(d.A)()),e(_e())}else{const t=n.sendbird.sdk.connectionStatus===O.b.Open;if(!l&&s&&t){const t=await T.b.addChannelModelByChannelId(s);if(t&&!c)return void e(Object(a.b)(Object(g.channelAction)(t.channelId,o,f)))}e(Me()),e(Object(d.A)())}},Ce=(Object(r.a)("MESSAGE__MARK_AS_READ"),e=>async(t,n)=>{const s=n(),c=e||Object(x.d)(s);c&&(await t(ge(c)),await T.b.markChannelAsRead(),t(Object(u.b)()))}),ve=Object(r.a)(L),Ie=Object(r.a)(A),Se=Object(r.a)(M),we=(e,t,n)=>{const s=e.map(e=>({user_id:e,nickname:t[e].name}));if(n){const e=n.id,t=n.name;-1===s.findIndex(t=>t.user_id===e)&&s.unshift({user_id:e,nickname:t})}return s},xe=(e,t,n)=>async(s,c,{apiContext:r})=>{const o=c();var i=o.user;const d=i.account,u=i.session,b=o.contacts.models;var h=o.channels;const f=h.joined,O=h.invited;if(d&&u){s(ve());const c=we(e,b,d);if(c.length<2)return;const o=await Object(j.c)(r(),u,c,t);if(o.ok){const t=o.body,c=Object(_.a)(t,m.b.JOINED),r=c.channelId;O.sortedKeys.includes(r)?(s(ie(r)),s(Object(l.h)(e,r))):f.sortedKeys.includes(r)?n&&(s(Object(a.b)(Object(g.channelUrl)(r))),s(Object(l.h)(e,r))):(await s(Ie({[r]:c})),s(Object(l.h)(e,r)),n&&s(Object(a.b)(Object(g.channelUrl)(r))))}else s(Se()),s(Object(l.x)(e))}},Ne=(e,t)=>async(n,s)=>{e.length>1&&(e=[e[0]]),await n(Object(b.w)(e)),n(xe(e,t,!0))},ke=e=>async(t,n,{apiContext:s})=>{const c=n();var r=c.user;const o=r.account,i=r.session,d=c.contacts.models,u=Object(I.B)(c,"channelSendbirdUrl");if(o&&i){const n=we(e,d);(await Object(j.k)(s(),i,n,u)).body?(t(Object(l.b)()),t(Object(a.a)())):Object(p.b)("Error inviting user to existing channel")}},De=e=>async(t,n)=>{const s=n(),c=Object(k.b)(s),a=e===m.b.INVITED,r=Object(S.d)(s),o=Object(S.f)(s),i=Object(S.g)(s),d=Object(S.c)(s),u=Object(S.e)(s);c&&a&&Object(w.b)(s)?r.channelId?t(Ae(r)):t(Ae(o)):c&&!a&&Object(w.b)(s)?o.channelId?t(Ae(o)):t(Ae(i)):c||!a?c||a?t(Te()):u.channelId?t(Ae(u)):t(Te()):d.channelId?t(Ae(d)):t(Ae(u))},Te=()=>async(e,t)=>{const n=t();if(n.channels.firstLoaded){const t=!!n.platform.currentPage,s=Object(S.b)(n,t);e(Ae(s))}},Ae=e=>async(t,n)=>{e&&e.channelId?e.channelAction?t(Object(a.c)(Object(g.channelAction)(e.channelId,e.channelAction,e.subredditName))):t(Object(a.c)(Object(g.channelUrl)(e.channelId,e.subredditName))):t(Object(a.c)(g.rootUrl))},Me=e=>async(t,n)=>{const s=n().platform.currentPage;if(s&&s.urlParams.userIds){const e=s.urlParams.userIds.split(",");return t(Ne(e,name))}return t(e?De(e):Te())},Le=Object(r.a)($),Re=Object(r.a)(Q),He=Object(r.a)(z),Pe=Object(r.a)(J),Ue=Object(r.a)(W),Be=Object(r.a)(Z),Ge=()=>async(e,t)=>{await Promise.all([e(ze()),e(Object(o.r)()),e(Object(o.q)()),e(Object(o.p)()),e(Fe()),e(Ve())]);const n=t().channels.models;await e(Ke(n)),e(Be()),e(Ee())},Ke=e=>async t=>{const n=Object(E.c)(e,[y.a.Direct,y.a.Group,y.a.Subreddit]);if(!n)return;const s={};for(const e in n){const t=n[e];t.channelState!==m.b.PARTIAL&&(s[t.channelId]=t)}if(s){const e=[];for(const t in s)s[t].members.map(t=>e.push(t.id));t(Object(b.w)(e))}},Fe=()=>async(e,t)=>{e(Le());const n=await T.b.getExistingChannels(m.b.INVITED,m.f.NonSuper).catch(()=>null);if(n){const t=n.hasMoreChannels,s=Object(y.e)(n.channels,m.b.INVITED);return e(Ke(s)),void e(Pe({channels:s,hasMoreChannels:t}))}e(Re()),Object(p.b)("Error fetching invited channels")},Ve=()=>async(e,t)=>{e(He());const n=await T.b.getExistingChannels(m.b.JOINED,m.f.NonSuper);if(n){const s=n.hasMoreChannels,c=Object(y.e)(n.channels,m.b.JOINED),a=Object(I.r)(t());return e(Ue({channels:c,hasMoreChannels:s})),void(s&&a<f.a.InitChannels&&e(Ve()))}},ze=()=>async(e,t)=>{const n=t(),s=Object(x.d)(n);s&&await T.b.addChannelModelByChannelId(s)},qe=Object(r.a)(U),$e=Object(r.a)(B),Qe=(Object(r.a)("CHANNEL__MESSAGES_LOADED"),Object(r.a)(te)),Je=(e,t)=>async(n,s)=>{const c=s(),a=Object(I.B)(c,"channelState");T.b.leaveChannel().then(()=>n(re(e,t))).then(()=>n(De(a))).catch(e=>Object(p.b)(`Error leaving channels: ${e.message}`))},We=Object(r.a)(ne),Ye=Object(r.a)(se),Ze=e=>async(t,n)=>{const s=n(),c=Object(I.k)(s);t(We({channelId:e})),T.b.getFirstMessage().then(e=>{const n=e[0];if(n){if(c&&c.hasMoreMessages){const e=Object(C.b)(n);t(Object(d.s)({[n.messageId]:e}))}return n.messageId}}).then(n=>n&&t(Ye({channelId:e,firstMessageId:n}))).catch(e=>Object(p.b)(`Error setting of first message: ${e.message}`))}},"./src/chat/actions/channel/dropdown.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return j}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"j",function(){return _}),n.d(t,"i",function(){return E}),n.d(t,"a",function(){return C}),n.d(t,"h",function(){return I}),n.d(t,"e",function(){return S}),n.d(t,"f",function(){return w});var s=n("./node_modules/react-router-redux/es/index.js"),c=n("./src/lib/makeActionCreator/index.ts"),a=n("./src/chat/actions/tooltip.ts"),r=n("./src/chat/actions/tracking.ts"),o=n("./src/chat/constants/channels.ts"),i=n("./src/chat/helpers/errors.ts"),d=n("./src/chat/helpers/urls/index.ts"),u=n("./src/chat/selectors/channels.ts"),l=n("./src/chat/selectors/subreddit.ts"),b=n("./src/chat/singleton/SendbirdSDK.ts");const h=o.a.INVITE_MEMBERS,f=o.a.LEAVE,m=o.a.LOCK_CHANNEL_CONFIRMATION,O=o.a.VIEW_MEMBERS,j=()=>async(e,t)=>{const n=t();const c=Object(u.x)(n).channelId,a=Object(l.b)(n),r=a&&a.name;e(Object(s.b)(Object(d.channelAction)(c,h,r)))},p=()=>async(e,t)=>{const n=t();const c=Object(u.x)(n).channelId,a=Object(l.b)(n),r=a&&a.name;e(Object(s.b)(Object(d.channelAction)(c,f,r)))},g=()=>async(e,t)=>{const n=t();const c=Object(u.x)(n).channelId,a=Object(l.b)(n),r=a&&a.name;e(Object(s.b)(Object(d.channelAction)(c,m,r)))},y=e=>async(t,n)=>{t(Object(a.a)({tooltipId:e})),t(Object(r.A)())},_=e=>async(t,n)=>{e&&(t(Object(r.m)()),t(Object(r.p)()).then(()=>{window.open(Object(d.viewProfileUrl)(e))}))},E=()=>async(e,t)=>{const n=t();const c=Object(u.x)(n).channelId,a=Object(l.b)(n),r=a&&a.name;e(Object(s.b)(Object(d.channelAction)(c,O,r)))},C="CHANNEL__UPDATE_CHANNEL_NAME",v=Object(c.a)(C),I=e=>async(t,n)=>{const s=Object(u.x)(n());if(s){const n=Object.assign({},s,{name:e}),c=Object.assign({},s);t(v(n)),await b.b.updateChannel(n).catch(e=>{Object(i.b)(e),t(v(c))})}},S=()=>async(e,t)=>{b.b.setMyCountPreference(o.c.Off)},w=()=>async(e,t)=>{b.b.setMyCountPreference(o.c.All)}},"./src/chat/actions/channel/subreddit.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return _}),n.d(t,"o",function(){return E}),n.d(t,"l",function(){return C}),n.d(t,"g",function(){return v}),n.d(t,"r",function(){return x}),n.d(t,"k",function(){return N}),n.d(t,"j",function(){return k}),n.d(t,"f",function(){return D}),n.d(t,"q",function(){return L}),n.d(t,"i",function(){return R}),n.d(t,"h",function(){return H}),n.d(t,"e",function(){return P}),n.d(t,"p",function(){return K}),n.d(t,"m",function(){return F}),n.d(t,"w",function(){return V}),n.d(t,"b",function(){return z}),n.d(t,"t",function(){return $}),n.d(t,"n",function(){return Q}),n.d(t,"u",function(){return W}),n.d(t,"c",function(){return Y}),n.d(t,"a",function(){return X}),n.d(t,"s",function(){return ne}),n.d(t,"v",function(){return se});var s=n("./node_modules/react-router-redux/es/index.js"),c=n("./src/lib/makeActionCreator/index.ts"),a=n("./src/chat/actions/channel.ts"),r=n("./src/chat/actions/message/index.ts"),o=n("./src/chat/actions/user.ts"),i=n("./src/chat/constants/channels.ts"),d=n("./src/chat/endpoints/sendbird/index.ts"),u=n("./src/chat/helpers/errors.ts"),l=n("./src/chat/helpers/urls/index.ts"),b=n("./src/chat/models/Channel/index.ts"),h=n("./src/chat/models/Channel/subreddit.ts"),f=n("./src/chat/models/Subreddit/index.ts"),m=n("./src/chat/selectors/channels.ts"),O=n("./src/chat/selectors/subreddit.ts"),j=n("./src/chat/selectors/user.ts"),p=n("./src/chat/singleton/SendbirdSDK.ts"),g=n("./src/chat/tracking/events/chatPreview.ts"),y=n("./src/chat/tracking/events/chatSettings.ts");const _="SUBREDDIT__ADD_SUBREDDIT_COLLECTION",E=Object(c.a)(_),C="SUBREDDIT_CHANNELS__FETCH_RECOMMENDED",v="SUBREDDIT_CHANNELS__ADD_RECOMMENDED_COLLECTION",I=Object(c.a)("SUBREDDIT_CHANNELS__FETCH_RECOMMENDED_FAILED"),S=Object(c.a)(C),w=Object(c.a)(v),x=()=>async(e,t,{apiContext:n})=>{var s=t(),c=s.user;const a=c.account,r=c.session,o=s.channels.subreddit.recommended.fetchingChannels;if(!a||!r||o)return;e(S());const i=await Object(d.f)(n(),r),u=i.ok&&i.body;if(u&&u.length){const t=Object(f.a)(u);await e(E(t));const n=Object(h.a)(u);e(w(n))}else e(I(i.error))},N="SUBREDDIT_CHANNELS__FETCH_JOINED_FAILED",k="SUBREDDIT_CHANNELS__FETCH_JOINED",D="SUBREDDIT_CHANNELS__ADD_JOINED_COLLECTION",T=Object(c.a)(N),A=Object(c.a)(k),M=Object(c.a)(D),L=()=>async(e,t)=>{const n=t(),s=i.b.JOINED;if(!Object(j.f)(n))return;e(A());const c=await p.b.getExistingChannels(s,i.f.Super).catch(()=>null);if(c){const n=c.channels,a=Object(f.c)(n);await e(E(a));const r=t(),o=Object(h.c)(n,s),i=Object(m.t)(r,o);return await e(M(Object.assign({},o,{sortedKeys:i}))),void(c.hasMoreChannels&&e(L()))}e(T())},R="SUBREDDIT_CHANNELS__FETCH_INVITED_FAILED",H="SUBREDDIT_CHANNELS__FETCH_INVITED",P="SUBREDDIT_CHANNELS__ADD_INVITED_COLLECTION",U=Object(c.a)(R),B=Object(c.a)(H),G=Object(c.a)(P),K=()=>async(e,t)=>{var n=t(),s=n.user;const c=s.account,a=s.session,r=n.channels.subreddit.invited.fetchingChannels;if(!c||!a||r)return;e(B());const o=await p.b.getExistingChannels(i.b.INVITED,i.f.Super).catch(()=>null);if(o){const t=Object(f.c)(o.channels),n=Object(h.c)(o.channels,i.b.INVITED);return await e(E(t)),void e(G(n))}e(U())},F="SUBREDDIT_CHANNELS__UPDATE_INVITED",V=Object(c.a)(F),z="SET__INVITED_SUBREDDIT_CHANNEL_TO_JOINED",q=Object(c.a)(z),$=(e,t)=>async(n,c)=>{const a=c(),o=a.channels,d=e||o.selected.channelId;if(!d)throw new u.a("joinedChannelId",d);const h=Object(m.h)(a,d);if(h&&h.type===b.a.Subreddit){Object(g.a)(a);const e=Object(m.t)(a,void 0,[h]);const c=(await p.b.enterChannel(h,!0)).data,o=c.messageListData;o?(n(Object(r.m)(o)),n(q({channelId:d,sortedKeys:e})),n(J(d)),n(Object(s.b)(Object(l.channelUrl)(d,t)))):c===p.a.KICKED||c===p.a.BANNED?n(te(c,t)):n(Object(s.b)(Object(l.channelAction)(d,i.a.VIEW_PRIVATE,t)))}},Q=(e,t)=>async(n,c,{apiContext:a})=>{const r=c(),o=r.channels,b=e||o.selected.channelId,h=Object(j.c)(r);if(!b)throw new u.a("requestChannelId",b);const f=Object(m.h)(r,b),O=Object(m.t)(r,void 0,[f]);if(f&&h){(await Object(d.a)(a(),h,f.channelSendbirdUrl)).error?n(Object(s.b)(Object(l.channelAction)(b,i.a.VIEW_PRIVATE,t))):(n(q({channelId:b,sortedKeys:O})),n(J(b)),n(Object(s.b)(Object(l.channelUrl)(b,t))))}},J=e=>async(t,n)=>{const s=n(),c=Object(m.h)(s,e);if(c){const e=[];c.members.map(t=>e.push(t.id)),t(Object(o.w)(e))}},W=(e,t)=>async(n,s,{apiContext:c})=>{var a=s().user;const r=a.account,o=a.session;if(r&&o)return new Promise(async n=>{await Object(d.l)(c(),o,e,t).then(e=>{n(e)}).catch(e=>{n(e)})})},Y="SUBREDDIT_CHANNEL__SET_KICKED_CHANNEL",Z=Object(c.a)(Y),X="SUBREDDIT_CHANNEL__SET_BANNED_CHANNEL",ee=Object(c.a)(X),te=(e,t)=>async(n,c)=>{const a=c(),r=Object(m.k)(a),o=r&&r.channelId;o&&(e===p.a.KICKED?n(Z({channelId:o})):e===p.a.BANNED&&n(ee({channelId:o})),n(Object(s.b)(Object(l.channelAction)(o,i.a.DENY,t))))},ne=(e,t)=>async(n,c)=>{const r=c(),o=e.channelId,d=Object(m.y)(r),u=Object(O.b)(r,o),b=Object(j.a)(r);u&&t===b&&(n(Object(a.L)(o,u.name)),o===d&&n(Object(s.b)(Object(l.channelAction)(o,i.a.DENY,u.name))))},se=(e,t)=>async(n,s)=>{await e?p.b.lockChannel():p.b.unlockChannel(),Object(y.e)(s(),e,t)}},"./src/chat/actions/container.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SIZE_CHANGED",function(){return a}),n.d(t,"sizeChanged",function(){return r}),n.d(t,"popoutOpened",function(){return o});var s=n("./src/chat/constants/container.ts"),c=n("./src/lib/makeActionCreator/index.ts");const a="CONTAINER__SIZE_CHANGED",r=Object(c.a)(a),o=()=>async(e,t,{apiContext:n})=>{const c=t().platform.currentPage;if(!c)throw new Error("Could not open pop-out: current page not defined");window.open(c.url,"_blank","width=1024, height=768"),e(r(s.a.MINIMIZED))}},"./src/chat/actions/members.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"e",function(){return b}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"f",function(){return y});var s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/endpoints/users/index.ts"),a=n("./src/chat/helpers/errors.ts"),r=n("./src/chat/models/User/index.ts"),o=n("./src/chat/selectors/channels.ts"),i=n("./src/chat/singleton/SendbirdSDK.ts");const d="MEMBERS__FETCHING_MEMBERS",u=Object(s.a)(d),l=Object(s.a)("MEMBERS__FETCHING_MEMBERS_FAILED"),b=e=>async(t,n)=>{const s=n(),c=Object(o.y)(s);if(c){t(u({channelId:c}));const n=e?await i.b.getChannelMembersStartsWith(e).catch(e=>Object(a.b)(`Error getting channel members: ${e.message}`)):await i.b.getSubredditChannelMembers().catch(e=>Object(a.b)(`Error getting subreddit channel members: ${e.message}`));if(n){const e=n.hasMoreMembers,s=n.members.map(e=>e.userId);t(j(c,s,e))}else t(l())}},h="MEMBERS__FETCHING_MEMBERS_COMPLETED",f=Object(s.a)(h),m="MEMBERS__ADD_CHANNEL_MEMBERS",O=Object(s.a)(m),j=(e,t,n)=>async(s,a,{apiContext:o})=>{const i=await Object(c.d)(o(),t);if(i.ok){const t=Object(r.a)(i.body);s(O({channelId:e,members:t}))}s(f({channelId:e,hasMoreMembers:n}))},p="MEMBERS__REMOVE_CHANNEL_MEMBERS",g=Object(s.a)(p),y=()=>async(e,t)=>{e(g())}},"./src/chat/actions/message/inboxScroller.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return b});var s=n("./node_modules/lodash/sortBy.js"),c=n.n(s),a=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/constants/batchSizes.ts"),o=n("./src/chat/selectors/channels.ts"),i=n("./src/chat/singleton/SendbirdSDK.ts");const d=e=>async(t,n)=>{const s=Object(o.y)(n()),a=(e=>{return c()(e,"createAt").splice(0,e.length-r.a.Messages).map(e=>e.messageId)})(e);s&&(t(l({messageIdList:a})),t(h({channelId:s})),i.c.resetChannelMessageListQuery())},u="MESSAGE__REMOVE_MESSAGES_FROM_CURRENT_CHANNEL",l=Object(a.a)(u),b="CHANNEL__RESET_HAS_MORE_MESSAGES",h=Object(a.a)(b)},"./src/chat/actions/message/index.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/flatten.js"),c=n.n(s),a=n("./node_modules/lodash/sortBy.js"),r=n.n(a),o=n("./node_modules/react-router-redux/es/index.js"),i=n("./src/lib/linkMatchers/index.ts"),d=n("./src/lib/makeActionCreator/index.ts"),u=n("./src/chat/actions/channel.ts"),l=n("./src/chat/actions/tracking.ts"),b=n("./src/chat/constants/messages.ts"),h=n("./node_modules/lodash/isEmpty.js"),f=n.n(h),m=n("./src/config.ts"),O=n("./src/lib/constants/index.ts"),j=n("./src/lib/makeRequest/index.ts");const p=m.a.embedlyApiKey,g=e=>e.filter(e=>!f()(e)).map(e=>({name:e.provider_name,title:e.title,description:e.description,faviconUrl:e.favicon_url,imageUrl:(e=>e&&e.length>0&&e[0]?e[0].url:void 0)(e.images),url:e.url}));var y=n("./src/chat/endpoints/sendbird/index.ts"),_=n("./src/chat/endpoints/users/index.ts"),E=n("./src/chat/helpers/errors.ts"),C=n("./src/chat/helpers/linkParser/index.ts"),v=n("./src/chat/models/Message/index.ts"),I=n("./src/chat/models/Message/adapter.ts"),S=n("./src/chat/models/Message/report.ts"),w=n("./src/chat/selectors/app.ts"),x=n("./src/chat/selectors/channels.ts"),N=n("./src/chat/selectors/contacts.ts"),k=n("./src/chat/selectors/messages.ts"),D=n("./src/chat/singleton/SendbirdSDK.ts");n.d(t,"v",function(){return T}),n.d(t,"w",function(){return A}),n.d(t,"a",function(){return M}),n.d(t,"c",function(){return P}),n.d(t,"n",function(){return B}),n.d(t,"x",function(){return G}),n.d(t,"l",function(){return K}),n.d(t,"j",function(){return V}),n.d(t,"u",function(){return z}),n.d(t,"h",function(){return $}),n.d(t,"s",function(){return Q}),n.d(t,"r",function(){return J}),n.d(t,"b",function(){return W}),n.d(t,"m",function(){return Z}),n.d(t,"k",function(){return X}),n.d(t,"A",function(){return ee}),n.d(t,"d",function(){return te}),n.d(t,"p",function(){return ne}),n.d(t,"o",function(){return se}),n.d(t,"i",function(){return ce}),n.d(t,"t",function(){return re}),n.d(t,"g",function(){return oe}),n.d(t,"e",function(){return ie}),n.d(t,"f",function(){return de}),n.d(t,"q",function(){return he}),n.d(t,"z",function(){return fe}),n.d(t,"y",function(){return me});const T=(e,t)=>async(n,s,{apiContext:c})=>{const a=Object(S.b)(e,t);a&&Object(_.b)(c(),a).then(()=>n(Object(o.a)()))},A=(e,t,n)=>async(s,c,{apiContext:a})=>{const i=r()(n,["createdAt"]),d=i.findIndex(({messageId:t})=>t===e.messageId),u=Math.max(d-20,0),l=d+20,b=i.slice(u,l),h=Object(S.a)(b,t),f=h.length&&Object(S.c)(h,e);f&&Object(_.b)(a(),f,h).then(()=>s(Object(o.a)()))},M="MESSAGE__ADD_ONE",L=Object(d.a)(M),R=(e,t)=>async(n,s)=>{const c=s(),a=Object(I.b)(t),r=await H(e,c,n);D.b.addMessage(e,t,r).then(e=>{const t=Object(x.B)(c,"channelId");t&&(n(L({message:{[e.messageId]:e},channelId:t,clientMessageId:a})),n(Object(l.v)(e.messageId)))}).catch(()=>{a&&(n(Object(l.z)(a)),n(F({clientMessageId:a,toggle:!0})))})},H=async(e,t,n)=>{const s=Object(i.b)(e);if(!s.length)return[];const a=[];return[...s.map(e=>{const n=Object(N.g)(t,e);return n||a.push(e),n&&n.id}).filter(e=>e),...(a.length&&c()(await Promise.all(a.slice(0,3).map(e=>D.b.searchMemberByName(e,!0))))||[]).map(e=>e&&e.id).filter(e=>e)]},P="MESSAGE__ADD_PENDING_ONE",U=Object(d.a)(P),B=(e,t)=>async(n,s)=>{const c=s();if(Object(C.b)(e)&&1===e.split(" ").length)return void q(n,c,e);const a=Object(v.a)(c,e,t);if(a){const s=t===b.b.TEXT?e:"";n(U(a)),n(R(s,a.data))}},G=e=>async(t,n)=>{const s=n(),c=Object(k.h)(s,e);c&&(t(F({clientMessageId:e,toggle:!1})),t(R(c.messageData.value,c.data)))},K="MESSAGE__TOGGLE_PENDING_MESSAGE_ERROR",F=Object(d.a)(K),V="MESSAGE__REMOVE_PENDING_ONE",z=Object(d.a)(V),q=async(e,t,n)=>{const s=i.c.match(n).map(e=>e.url).join(""),c=b.b.EMBED;let a={url:n};const r=Object(v.a)(t,JSON.stringify(a),c);if(r){e(U(r));const t=await(async({chars:e,scheme:t,url:n})=>Object(j.b)({endpoint:"https://api.embed.ly/1/extract",method:O.ib.GET,data:{key:p,url:n,scheme:t,chars:e}}).then(e=>e.ok&&Array.isArray(e.body)?e.body:[e.body]).then(g))({url:s,scheme:"https",chars:140});if(t){a=Object.assign({},a,{embed:t[0]});const n=JSON.stringify(a),s=JSON.stringify(Object(I.a)(n,c,r.clientMessageId));e(R(a.url,s))}}},$="MESSAGE__RECEIVE_ADD_ONE",Q=Object(d.a)($),J=e=>async(t,n,{apiContext:s})=>{const c=n(),a=Object(x.y)(c)===e.channelId;Object(w.c)(c)&&a&&t(Object(u.K)(e.channelId)),t(Q({[e.messageId]:e}))},W="MESSAGE__ADD_LIST",Y=Object(d.a)(W),Z=e=>async(t,n,{apiContext:s})=>{const c=Object(x.B)(n(),"channelId");t(Y(Object.assign({channelId:c},e)))},X="MESSAGE__SET_MESSAGE_LIST_IS_LOADED",ee=Object(d.a)(X),te="MESSAGE__DELETE_ONE",ne=Object(d.a)(te),se=e=>async(t,n)=>{const s=n(),c=Object(k.d)(s,e);c&&D.b.deleteMessage(c).then(()=>t(ne(c.messageId))).then(()=>t(Object(o.a)()))},ce="MESSAGE__RECEIVE_DELETE_ONE",ae=Object(d.a)(ce),re=e=>async(t,n)=>{t(ae(e))},oe="MESSAGE__GET_PREVIOUS_MESSAGES_START",ie="MESSAGE__GET_PREVIOUS_MESSAGES_END",de="MESSAGE__GET_PREVIOUS_MESSAGES_ERROR",ue=Object(d.a)(oe),le=Object(d.a)(ie),be=Object(d.a)(de),he=e=>async(t,n)=>{const s=Object(x.B)(n(),"channelId");t(ue(s)),t(Object(l.B)()),s&&await D.b.getPreviousMessages(b.c.USER,e).then(e=>t(le(Object.assign({channelId:s},e)))).catch(()=>t(be(s)))},fe=(e,t)=>async(n,s,{apiContext:c})=>{try{await Object(y.j)(c(),t,e)}catch(a){Object(E.b)(a)}},me=(e,t)=>async(n,s,{apiContext:c})=>{try{await Object(y.d)(c(),t,e)}catch(a){Object(E.b)(a)}}},"./src/chat/actions/message/unreadCount.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return O});var s=n("./node_modules/lodash/debounce.js"),c=n.n(s),a=n("./node_modules/lodash/isEqual.js"),r=n.n(a),o=n("./src/lib/constants/index.ts"),i=n("./src/lib/makeActionCreator/index.ts"),d=n("./src/chat/endpoints/sendbird/index.ts"),u=n("./src/chat/helpers/errors.ts"),l=n("./src/chat/selectors/user.ts"),b=n("./src/chat/singleton/SendbirdSDK.ts");const h="MESSAGE__SET_UNREAD_COUNT",f=Object(i.a)(h),m=e=>({basicChannelCount:e&&Number(e.unread_count)||0,subredditChannelCount:e&&Number(e.subreddit_unread_count)?1:0,subredditMentionCount:e&&Number(e.subreddit_mention_count)||0}),O=c()((e,t,n)=>async(s,c,{apiContext:a})=>{const o=c();let i;(i="number"==typeof e||"number"==typeof t||"number"==typeof n?{basicChannelCount:e||0,subredditChannelCount:t||0,subredditMentionCount:n||0}:b.b.isConnected()?await(async()=>{try{const t=await b.b.getUnreadCount();return m(t)}catch(e){Object(u.b)(e)}})():await(async(e,t)=>{const n=Object(l.c)(e);if(n)try{const e=await Object(d.i)(t(),n);return m(e&&e.body)}catch(s){Object(u.b)(`Error getting proxy unread count: ${s}`)}})(o,a))&&!r()(o.messages.unread,i)&&await s(f(i))},o.Vb,{leading:!0})},"./src/chat/actions/page.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return b});var s=n("./src/chat/actions/channel.ts"),c=n("./src/chat/actions/sidebar.ts"),a=n("./src/chat/actions/tracking.ts"),r=n("./src/chat/actions/user.ts"),o=n("./src/chat/selectors/platform.ts");function i(e){return t=>async(n,s,a)=>{const i=Object(o.f)(s());n(Object(c.d)(i)),await Object(r.l)()(n,s,a),await Object(r.p)()(n,s,a),await e(t)(n,s,a)}}const d=i(e=>async(e,t,n)=>{}),u=i(e=>async(e,t,n)=>{}),l=i(e=>async(e,t,n)=>{}),b=i(e=>async(e,t,n)=>{const c=t().platform.currentPage;{const t=c&&c.urlParams.userIds.split(",");if(t)return e(Object(a.i)(t)),void e(Object(s.B)(t,name))}})},"./src/chat/actions/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return b});n("./src/config.ts");var s=n("./src/lib/areUrlsEqual/index.ts"),c=(n("./src/lib/constants/index.ts"),n("./src/lib/logs/timing.js")),a=n("./src/lib/makeActionCreator/index.ts"),r=(n("./src/chat/strings/index.ts"),n("./src/chat/actions/channel.ts")),o=n("./src/chat/actions/sendbird/index.ts");const i="PLATFORM__HISTORY_LOCATION_SET",d="PLATFORM__INITIAL_REFERRER_SET",u="PLATFORM__PAGE_META_SET",l=(e,t,n)=>async(a,i,d)=>{const u=Date.now(),l=i().platform.currentPage;if(n&&(a(b({action:t,location:e,routeMatch:n})),!l||!Object(s.a)(l.url,e))){if(n){const e=n.match;await n.route.action(e)(a,i,d);const t=n.route.meta;if(t){const e=Date.now()-u;Object(c.b)({duration:e,meta:t})}}n.match.params.subredditName&&a(Object(o.l)()),n.match.params.channelId&&a(Object(r.O)())}},b=Object(a.a)(i);Object(a.a)(d),Object(a.a)(u),Object(a.a)("PLATFORM__MODAL_TOGGLED")},"./src/chat/actions/promo/checkPromoInLocalStorage.ts":function(e,t,n){"use strict";var s=n("./src/lib/cache/index.ts"),c=n("./src/chat/constants/promos.ts"),a=n("./src/chat/models/Promo/index.ts");t.a=(e=>{const t=Object(s.b)(c.a)||[];return e=(e=>{switch(e){case a.c.LegacySubredditChatFtux:return a.a.SubredditChatFtux;case a.c.LegacyNSFWWarning:return a.b.NSFWWarning;default:return e}})(e),t.includes(e)})},"./src/chat/actions/promo/index.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return j}),n.d(t,"e",function(){return p}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return _}),n.d(t,"f",function(){return C}),n.d(t,"c",function(){return v});var s=n("./src/lib/cache/index.ts"),c=n("./src/lib/constants/index.ts"),a=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/constants/promos.ts"),o=n("./src/chat/endpoints/users/index.ts"),i=n("./src/chat/models/Promo/index.ts"),d=n("./src/chat/selectors/experiments.ts"),u=n("./src/chat/selectors/messages.ts"),l=n("./src/chat/selectors/user.ts"),b=n("./src/chat/tracking/events/platform.ts"),h=n("./src/chat/actions/promo/checkPromoInLocalStorage.ts"),f=n("./src/chat/actions/promo/constants.ts");const m=Object(a.a)(f.a),O=Object(a.a)(f.b),j=e=>async(t,n)=>{t(O(e)),(e=>{if(!Object(h.a)(e)){const t=[...Object(s.b)(r.a)||[],e];Object(s.d)(r.a,t,c.Cc)}})(e)},p=()=>async(e,t)=>{Object.keys(i.b).forEach(t=>{Object(h.a)(i.b[t])||e(m(i.b[t]))})},g="PROMO__DISPLAY_SUBREDDIT_CHAT_FTUX_PROMO",y=Object(a.a)(g),_="PROMO__SEEN_SUBREDDIT_CHAT_FTUX",E=Object(a.a)(_),C=()=>async(e,t,{apiContext:n})=>{Object(o.e)(n()),e(E()),e(j(i.a.SubredditChatFtux))},v=()=>async(e,t)=>{const n=t(),s=Object(h.a)(i.a.SubredditChatFtux),c=Object(l.e)(n),a=Object(d.a)(n),r=Object(d.b)(n);!s&&!c&&a&&r&&(await e(m(i.a.SubredditChatFtux)),await e(y(Object(u.i)(n))),Object(b.b)(n))}},"./src/chat/actions/sendbird/config.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return l});var s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/endpoints/sendbird/index.ts");const a="SENDBIRD_CONFIG__PROXY",r=Object(s.a)(a),o="SENDBIRD_CONFIG__GLOBAL_SETTINGS",i=Object(s.a)(o),d="SENDBIRD_CONFIG__USER_EXPERIMENTS",u=Object(s.a)(d),l=()=>async(e,t,{apiContext:n})=>{const s=await Object(c.e)(n());s.ok&&await Promise.all([e(r({host:s.body.proxy_host})),e(i({maxMessageLength:parseInt(s.body.max_message_length,10)})),e(u({userSubredditChatEnabled:s.body.user_subreddit_chat_enabled}))])}},"./src/chat/actions/sendbird/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"j",function(){return f}),n.d(t,"h",function(){return m}),n.d(t,"m",function(){return j}),n.d(t,"b",function(){return p}),n.d(t,"i",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"n",function(){return C}),n.d(t,"d",function(){return v}),n.d(t,"e",function(){return I}),n.d(t,"k",function(){return x}),n.d(t,"f",function(){return N}),n.d(t,"l",function(){return D});var s=n("./src/lib/cache/index.ts"),c=n("./src/lib/constants/index.ts"),a=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/actions/tracking.ts"),o=n("./src/chat/endpoints/accounts/index.ts"),i=n("./src/chat/endpoints/sendbird/index.ts"),d=n("./src/chat/models/Contact/index.ts"),u=n("./src/chat/selectors/contacts.ts"),l=n("./src/chat/selectors/experiments.ts");const b="SENDBIRD__DEACTIVATE_SENDBIRD_SESSION",h="SENDBIRD__ACTIVATE_SENDBIRD_SESSION",f=Object(a.a)(b),m=(Object(a.a)(h),"SENDBIRD__SET_SENDBIRD_SESSION"),O=Object(a.a)(m),j=(e=!0)=>async(t,n,{apiContext:a})=>{var r=n().user;const o=r.account,d=r.session;if(d&&o){let n;const r=Object(s.c)(c.q.CHAT,"session",o.id),l=Object(s.b)(r);if(l&&l.token)n=l;else{const e=await Object(i.h)(a(),d);if(e.ok){var u=e.body;const t=u.valid_until;n={expires:t,token:u.sb_access_token},Object(s.d)(r,n,new Date(t))}}if(n)return void t(O(Object.assign({},n,{active:e})))}t(f())},p="SENDBIRD__ADD_MEMBERS_TO_KNOWN_CONTACTS",g=Object(a.a)(p),y="SENDBIRD__SET_REDDIT_CONTACT_LIST",_=6*c.N,E=Object(a.a)(y),C=()=>async(e,t,{apiContext:n})=>{const a=t(),r=a.contacts.models,o=Object(s.c)(c.q.CHAT,"contacts",a.user.account.id),u=Object(s.b)(o);if(u&&u.version===d.a)return void e(E(u.data));const l=t().user.session;if(!l)return;const b=await Object(i.g)(n(),l,25),h=Object(d.c)(b.body).map(e=>r[e.id]?r[e.id]:e),f={version:d.a,data:h};Object(s.d)(o,f,_),e(E(h))},v="SENDBIRD__IDENTIFY_CONTACT_BEGIN",I="SENDBIRD__IDENTIFY_CONTACT_END",S=Object(a.a)(v),w=Object(a.a)(I),x=e=>async(t,n,{apiContext:s})=>{Object(u.c)(n(),e.username)||(t(S({username:e.username})),Object(o.b)(s(),e.username).then(n=>{if(n.ok){const s=Object(d.d)(n.body.data);if(s)return t(w({username:e.username,contact:s,valid:!0}))}else t(Object(r.y)(e.username));t(w({username:e.username,valid:!1}))}))},N="SENDBIRD__OPT_IN",k=Object(a.a)(N),D=()=>async(e,t,{apiContext:n})=>{Object(l.b)(t())||(e(k({userSubredditChatEnabled:!0})),Object(i.m)(n()))}},"./src/chat/actions/sendbird/sdk.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return j}),n.d(t,"e",function(){return y}),n.d(t,"f",function(){return E}),n.d(t,"h",function(){return C}),n.d(t,"g",function(){return v});var s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/actions/channel.ts"),a=n("./src/chat/actions/message/index.ts"),r=n("./src/chat/actions/message/unreadCount.ts"),o=n("./src/chat/actions/sendbird/index.ts"),i=n("./src/chat/actions/toast.ts"),d=n("./src/chat/constants/sendbird.ts"),u=n("./src/chat/constants/toast.ts"),l=n("./src/chat/selectors/sendbird.ts"),b=n("./src/chat/selectors/user.ts"),h=n("./src/chat/singleton/SendbirdSDK.ts");const f="SENDBIRD_SDK__CONNECT_FAIL",m="SENDBIRD_SDK__CONNECT_SUCCESS",O="SENDBIRD_SDK__DISCONNECT",j="SENDBIRD_SDK__UPDATE_CONNECTION_STATUS",p=Object(s.a)(f),g=Object(s.a)(m),y=e=>async(t,n)=>{const s=n(),o=Object(l.d)(s),f=Object(l.c)(s),m=Object(l.a)(s),O=Object(b.d)(s),j={connectionStatus:d.b.Closed};if(O&&m&&f){const n=O.id,s=O.name;o&&t(Object(i.e)({toast:u.a.ConnectionPending})),h.b.connect(m,e||f.token,n,s,t).then(e=>{e.error?(t(p(e.error)),t(C(Object.assign({},j))),t(Object(i.e)({toast:u.a.ConnectionClosed}))):(t(g()),o&&(t(Object(a.q)(!0)),t(Object(i.e)({toast:u.a.ConnectionOpen})),t(Object(i.c)(3))),t(Object(r.b)()),t(Object(c.F)()))})}},_=Object(s.a)(O),E=()=>async e=>{h.b.disconnect().then(()=>{e(_()),e(Object(o.j)())})},C=Object(s.a)(j),v=()=>h.b.reconnect()},"./src/chat/actions/session.ts":function(e,t,n){"use strict";var s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/lib/constants/index.ts"),a=n("./src/lib/makeApiRequest/index.ts");n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return l});const r="SESSION__USER_AUTHENTICATED",o="SESSION__USER_LOGGED_OUT",i="SESSION__USER_REAUTHENTICATED",d=(Object(s.a)(r),Object(s.a)(i)),u=Object(s.a)(o),l=()=>async(e,t,{apiContext:n})=>{const s=t().user.session;if(s){const t=await((e,t)=>Object(a.c)(e,{data:t,endpoint:"/refreshproxy",method:c.ib.POST}))(n(),s);if(t.ok){const n=t.body;if(n.unsafeLoggedOut)return void(s.unsafeLoggedOut||e(u()));e(d(n))}}}},"./src/chat/actions/sidebar.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"d",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"e",function(){return f}),n.d(t,"c",function(){return m});var s=n("./node_modules/react-router-redux/es/index.js"),c=n("./src/lib/makeActionCreator/index.ts"),a=n("./src/chat/constants/sidebar.ts"),r=n("./src/chat/helpers/urls/index.ts"),o=n("./src/chat/selectors/channels.ts"),i=n("./src/chat/selectors/channels/next.tsx"),d=n("./src/chat/selectors/subreddit.ts");const u="SIDEBAR__SET_SIDEBAR_ACTIVE_INDEX",l=Object(c.a)(u),b=e=>async(t,n)=>{const s=n();e!==s.sidebarTabs.activeIndex&&t(l({activeIndex:e}))},h="SIDEBAR__SET_LAST_CHANNEL_ID_PER_TAB",f=Object(c.a)(h),m=e=>async(t,n)=>{const c=n(),u=c.sidebarTabs.lastChannelIdPerTab[e]||((e,t)=>{switch(t){case a.a.SubredditChannels:return Object(i.a)(e,a.a.SubredditChannels);case a.a.DirectChannels:return Object(i.a)(e,a.a.DirectChannels)}})(c,e);if(t(b(e)),u){const e=Object(o.h)(c,u);if(e){const n=Object(d.b)(c,u),a=n&&n.name,o=Object(r.getChannelUrl)(e,a);return void t(Object(s.b)(o))}}}},"./src/chat/actions/theme.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"THEME_CHANGED",function(){return a}),n.d(t,"themeToggle",function(){return d}),n.d(t,"switchTheme",function(){return u});var s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/chat/constants/theme.ts");const a="THEME_CHANGED",r=c.b.REDDIT,o=c.b.NIGHT,i=Object(s.a)(a),d=()=>async(e,t)=>{const n=t().user.prefs.globalTheme;e(i({themeKey:n===r?o:r}))},u=e=>async(t,n)=>{t(i({themeKey:e?o:r}))}},"./src/chat/actions/toast.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"c",function(){return d});var s=n("./src/lib/makeActionCreator/index.ts"),c=n("./src/lib/constants/index.ts");const a="TOAST__RESET_TOAST",r=Object(s.a)(a),o="TOAST__UPDATE_TOAST",i=Object(s.a)(o),d=e=>async(t,n)=>{setTimeout(()=>t(r()),e*c.Vb)}},"./src/chat/actions/tooltip.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var s=n("./src/lib/makeActionCreator/index.ts");const c=Object(s.a)("TOOLTIP__DROPDOWN_TOGGLED")},"./src/chat/actions/tracking.ts":function(e,t,n){"use strict";var s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/constants/channels.ts"),a=n("./src/chat/selectors/channels.ts"),r=n("./src/chat/selectors/contacts.ts"),o=n("./src/chat/selectors/platform.ts"),i=n("./src/chat/selectors/sidebar.ts"),d=n("./src/chat/tracking/fields/chat.ts"),u=n("./src/chat/tracking/fields/common.ts"),l=n("./src/chat/tracking/fields/subreddit.ts"),b=n("./src/chat/tracking/sendEvent.ts");var h=n("./src/chat/tracking/events/chatSettings.ts"),f=n("./src/chat/tracking/events/chatView.ts"),m=n("./src/chat/tracking/events/contactsList.ts"),O=n("./src/chat/tracking/events/invitationInbox.ts"),j=n("./src/chat/tracking/events/messagesInbox.ts"),p=n("./src/chat/selectors/telemetry.ts");n.d(t,"g",function(){return g}),n.d(t,"v",function(){return y}),n.d(t,"z",function(){return _}),n.d(t,"w",function(){return E}),n.d(t,"B",function(){return C}),n.d(t,"A",function(){return v}),n.d(t,"t",function(){return I}),n.d(t,"p",function(){return S}),n.d(t,"n",function(){return w}),n.d(t,"u",function(){return x}),n.d(t,"f",function(){return N}),n.d(t,"y",function(){return k}),n.d(t,"x",function(){return D}),n.d(t,"h",function(){return T}),n.d(t,"d",function(){return A}),n.d(t,"b",function(){return M}),n.d(t,"k",function(){return L}),n.d(t,"l",function(){return R}),n.d(t,"m",function(){return H}),n.d(t,"j",function(){return P}),n.d(t,"e",function(){return U}),n.d(t,"i",function(){return B}),n.d(t,"c",function(){return G}),n.d(t,"o",function(){return K}),n.d(t,"D",function(){return F}),n.d(t,"r",function(){return V}),n.d(t,"C",function(){return z}),n.d(t,"q",function(){return q}),n.d(t,"s",function(){return $}),n.d(t,"a",function(){return Q});const g=()=>async(e,t)=>{Object(j.b)(t())},y=e=>async(t,n)=>{Object(f.a)(n(),e)},_=e=>async(t,n)=>{Object(f.d)(n(),e)},E=(e,t)=>async(n,s)=>{Object(f.b)(s(),e,t)},C=()=>async(e,t)=>{Object(f.e)(t())},v=()=>async(e,t)=>{Object(h.f)(t())},I=()=>async(e,t)=>{const n=Object(a.v)(t());if(n&&n.length){const e=n[0].id;Object(h.c)(t(),e)}},S=()=>async(e,t)=>{const n=t();Object(o.c)(n)!==c.a.VIEW_INVITE&&Object(h.b)(n)},w=()=>async(e,t)=>{Object(h.a)(t())},x=e=>async(t,n)=>{Object(h.d)(n(),e)},N=e=>async(t,n)=>{Object(m.c)(n(),e)},k=e=>async(t,n)=>{Object(r.c)(n(),e)&&Object(m.f)(n())},D=e=>async(t,n)=>{const s=n(),c=e&&e.filter(e=>e!==s.user.account.id),a=c&&c[0],o=s.contacts.models[a],i=o&&o.name,d=Object(r.a)(n(),i);d&&Object(m.e)(n(),d)},T=(e,t)=>async(e,n)=>{Object(m.d)(n(),t)},A=()=>async(e,t)=>{Object(m.b)(t())},M=()=>async(e,t)=>{Object(m.a)(t())},L=()=>async(e,t)=>{Object(O.c)(t())},R=()=>async(e,t)=>{Object(O.d)(t())},H=()=>async(e,t)=>{const n=t();Object(o.c)(n)===c.a.VIEW_INVITE&&Object(O.e)(n)},P=()=>async(e,t)=>{const n=t();Object(O.b)(n),Object(i.b)(n)&&Object(O.f)(t())},U=()=>async(e,t)=>{Object(O.a)(t())},B=e=>async(t,n)=>{((e,t)=>{Object(b.a)(Object.assign({noun:"create_chat",source:s.b.UserProfile,action:s.a.Click,chat:Object.assign({},Object(d.E)(e,t),Object(d.C)(e,t),Object(d.D)(e,t)),user:Object.assign({},(e=>({id:e.user.account.id}))(e))},Object(u.a)(e)))})(n(),e)},G=()=>async(e,t)=>{Object(j.a)(t())},K=()=>async(e,t)=>{Object(j.c)(t())},F=()=>async(e,t)=>{Object(j.g)(t())},V=()=>async(e,t)=>{Object(j.d)(t())},z=e=>async(t,n)=>{const c=n();c.tooltipId!==e&&(e=>{Object(b.a)(Object.assign({noun:"snoomoji",source:s.b.ChatKeyboard,action:s.a.View,chat:Object.assign({},Object(d.A)(e),Object(d.p)(e),Object(d.g)(e)),subreddit:Object.assign({},Object(l.a)(e),Object(l.b)(e))},Object(u.a)(e)))})(c)},q=()=>async(e,t)=>{(e=>{Object(b.a)(Object.assign({noun:"other_message",source:s.b.ChatView,action:s.a.ModDelete,chat:Object.assign({},Object(d.A)(e),Object(d.p)(e),Object(d.g)(e),Object(d.s)(e),Object(d.n)(e),Object(d.x)(e)),subreddit:Object.assign({},Object(l.a)(e),Object(l.b)(e))},Object(u.a)(e)))})(t())},$=e=>async(t,n)=>{const c=n(),a=Object(o.b)(c),r=(e=>{switch(e){case s.b.ChatSettings:return s.b.ChatSettings;default:return s.b.ChatView}})(a&&a.source);((e,t,n)=>{Object(b.a)(Object.assign({noun:"user",source:n,action:s.a.Kick,chat:Object.assign({},Object(d.A)(e),Object(d.p)(e),Object(d.g)(e),Object(d.s)(e),Object(d.n)(e),Object(d.x)(e)),subreddit:Object.assign({},Object(l.a)(e),Object(l.b)(e))},Object(u.a)(e),{actionInfo:Object.assign({settingValue:t},Object(p.a)(e))}))})(n(),e,r)},Q=e=>async(t,n)=>{((e,t)=>{Object(b.a)(Object.assign({noun:"ban_user",source:t,action:s.a.Click,chat:Object.assign({},Object(d.A)(e),Object(d.p)(e),Object(d.g)(e),Object(d.s)(e),Object(d.n)(e),Object(d.x)(e)),subreddit:Object.assign({},Object(l.a)(e),Object(l.b)(e))},Object(u.a)(e)))})(n(),e)}},"./src/chat/actions/typingIndicator.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return d});var s=n("./node_modules/lodash/isEqual.js"),c=n.n(s),a=n("./src/lib/makeActionCreator/index.ts"),r=n("./src/chat/selectors/channels.ts");const o="TYPING_INDICATOR__UPDATE",i=Object(a.a)(o),d=({channelId:e,usernames:t})=>async(n,s)=>{const a=Object(r.B)(s(),"channelId"),o=s().typingIndicator.usernames,d=e===a,u=t.length>3&&o.length>3,l=!c()(t,o);d&&l&&!u&&n(i({usernames:t}))}},"./src/chat/actions/user.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/chunk.js"),c=n.n(s),a=n("./node_modules/react-router-redux/es/index.js"),r=n("./src/lib/makeActionCreator/index.ts"),o=n("./src/chat/actions/channel.ts"),i=n("./src/chat/actions/theme.ts"),d=n("./src/chat/actions/tracking.ts"),u=n("./src/chat/constants/channels.ts"),l=n("./src/chat/endpoints/accounts/index.ts"),b=n("./src/chat/endpoints/sendbird/index.ts"),h=n("./src/chat/endpoints/users/index.ts"),f=n("./src/chat/helpers/errors.ts"),m=n("./src/chat/models/Channel/index.ts"),O=n("./src/chat/models/Contact/index.ts");const j=e=>({experimentId:e.experiment_id,owner:e.owner,variant:e.variant});var p=n("./src/chat/models/User/index.ts"),g=n("./src/chat/selectors/channels.ts"),y=n("./src/chat/selectors/user.ts"),_=n("./src/chat/singleton/SendbirdSDK.ts");n.d(t,"a",function(){return C}),n.d(t,"f",function(){return v}),n.d(t,"e",function(){return I}),n.d(t,"g",function(){return S}),n.d(t,"d",function(){return w}),n.d(t,"q",function(){return x}),n.d(t,"r",function(){return T}),n.d(t,"v",function(){return A}),n.d(t,"l",function(){return L}),n.d(t,"i",function(){return R}),n.d(t,"w",function(){return B}),n.d(t,"h",function(){return G}),n.d(t,"m",function(){return F}),n.d(t,"k",function(){return V}),n.d(t,"t",function(){return z}),n.d(t,"j",function(){return q}),n.d(t,"s",function(){return $}),n.d(t,"c",function(){return Q}),n.d(t,"o",function(){return Y}),n.d(t,"u",function(){return Z}),n.d(t,"b",function(){return X}),n.d(t,"p",function(){return ne}),n.d(t,"n",function(){return se});var E=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&(n[s[c]]=e[s[c]])}return n};const C="USER__ACCOUNT_FETCH_COMPLETED",v="USER__REDDAID_RECEIVED",I="USER__LOID_RECEIVED",S="USER__SESSION_TRACKER_RECEIVED",w="FETCH_EXPERIMENTS_COMPLETED",x=Object(r.a)(I),N=Object(r.a)("USER__ACCOUNT_FETCH_PENDING"),k=Object(r.a)(C),D=Object(r.a)("USER__ACCOUNT_FETCH_FAILED"),T=Object(r.a)(v),A=Object(r.a)(S),M=Object(r.a)(w),L=()=>async(e,t,{apiContext:n})=>{const s=t();if(!s.user.session||s.user.account)return;e(N());const c=await Object(l.c)(n());if(c.ok&&c.body&&c.body.features){const t=c.body,n=c.body.features,s=Object(p.b)(t),a=(e=>Object.keys(e).reduce((t,n)=>{const s=e[n];return"boolean"==typeof s&&(t[n]=s),"object"==typeof s&&(t[n]=j(s)),t},{}))(n),r=!!s.prefNightmode;e(k(s)),e(M(a)),e(Object(i.switchTheme)(r))}else e(D(c.error))},R="USER__USERS_FETCH_COMPLETED",H=Object(r.a)("USER__USERS_FETCH_PENDING"),P=Object(r.a)(R),U=Object(r.a)("USER__USERS_FETCH_FAILED"),B=e=>async(t,n,{apiContext:s})=>{const a=n().contacts.models,r=e.filter(e=>!a[e]),o=c()(r,100);if(!r.length)return;t(H(e));const i=await Promise.all(o.map(e=>Object(h.d)(s(),e))).catch(()=>[]);for(const e of i)if(e.ok){const n=Object(p.a)(e.body);t(P(n))}else t(U())},G="USERS__USERS_ADD_SELECTED",K=Object(r.a)(G),F=e=>async(t,n)=>{t(K(e)),t(Object(d.f)(e))},V="USERS__USERS_REMOVE_SELECTED",z=Object(r.a)(V),q="USERS__USERS_REMOVE_ALL_SELECTED",$=Object(r.a)(q),Q="USERS__BLOCK_USER_COMPLETED",J=Object(r.a)(Q),W=Object(r.a)("USERS__BLOCK_USER_FAILED"),Y=e=>async(t,n,{apiContext:s})=>{const c=n(),r=c.contacts.models[e],i=r&&r.name,d=Object(g.x)(c),b=Object(g.i)(c)||u.b.JOINED,h=d&&d.type===m.a.Direct,O=Object(g.k)(c);if(!O)throw new f.a("currentChannel",O);const j=O.channelId;if(!j)throw new f.a("blockedChannelId",j);const p=await Object(l.a)(s(),e);p&&p.ok&&h?_.b.hideChannel().then(()=>t(J({userId:e,username:i}))).then(()=>t(Object(o.L)(j))).then(()=>t(Object(o.P)(b))):p&&p.ok&&!h?(t(J({userId:e,username:i})),t(Object(a.a)())):p&&t(W(p.error))},Z=e=>async(t,n,{apiContext:s})=>{const c=e.user,r={reason:e.reason,userNickname:c.name};Object(h.a)(s(),r).then(()=>t(Object(a.a)()))},X="BLOCKED_USER_LIST_FETCH_COMPLETED",ee=Object(r.a)("BLOCKED_USER_LIST_FETCH_FAILED"),te=Object(r.a)(X),ne=()=>async(e,t,{apiContext:n})=>{const s=t().contacts;if(!s.fetchedBlockedUsers){const t=await Object(h.c)(n());if(t.ok&&t.body&&t.body.data){const n=t.body.data.children,c=s.models,a={};n.forEach(e=>{if(c[e.id])a[e.id]=Object.assign({},c[e.id],{isBlocked:!0});else{e.date;const t=E(e,["date"]);a[e.id]=Object.assign({},O.b,t,{isBlocked:!0})}}),e(te({blockedContacts:a}))}else e(ee(t.error))}},se=e=>async(t,n,{apiContext:s})=>{const c=n(),r=Object(y.c)(c);if(r){const n=(e=>({chat_ban:e.chatBan,delete_all_messages:e.deleteAllMessages,subreddit_id:e.subredditId,user_id:e.userId}))(e);(await Object(b.b)(s(),r,n)).ok||Object(f.b)("Error with ban user and delete all messages"),t(Object(a.a)())}}},"./src/chat/components/CloseIcon/index.tsx":function(e,t,n){"use strict";n("./node_modules/react/index.js");var s,c=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/reselect/lib/index.js"),r=n("./bundled-modules/styled-components/styled-components.min.js"),o=n.n(r),i=n("./src/chat/actions/container.ts"),d=n("./src/chat/actions/tracking.ts"),u=n("./src/chat/constants/container.ts"),l=n("./src/chat/controls/Button/index.tsx"),b=n("./src/chat/helpers/dom.ts"),h=n("./src/chat/helpers/styles/mixins/index.tsx"),f=n("./src/chat/icons/svgs/NavClose/index.tsx"),m=n("./src/chat/strings/index.ts"),O=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});const j=o()(l.d).withConfig({componentId:"s10llmio-0"})(["","right: 1em;top: 1em;position: absolute;z-index: 3;"],h.e),p=Object(c.connect)(()=>Object(a.createStructuredSelector)({containerSize:e=>e.container.size}),e=>({close:()=>{e(Object(i.sizeChanged)(u.a.HIDDEN)),e(Object(d.c)())}}));t.a=p(({className:e,close:t,containerSize:n})=>n===u.a.EMBED||n===u.a.MINIMIZED?O(j,{onClick:Object(b.b)(t),title:Object(m.a)("en","app.layout.header.close"),className:e},void 0,O(f.a,{})):null)},"./src/chat/components/Root/index.tsx":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),c=n.n(s),a=n("./node_modules/react-router/es/index.js"),r=(n("./assets/fonts/IBMPlexSans/font.less"),n("./assets/fonts/NotoSans/font.less"),n("./node_modules/react-redux/es/index.js")),o=n("./node_modules/reselect/lib/index.js"),i=n("./src/config.ts"),d=n("./bundled-modules/styled-components/styled-components.min.js"),u=n.n(d);const l=n("./src/chat/constants/theme.ts").b.REDDIT;var b,h=(b="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,s){var c=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={}),t&&c)for(var r in c)void 0===t[r]&&(t[r]=c[r]);else t||(t=c||{});if(1===a)t.children=s;else if(a>1){for(var o=Array(a),i=0;i<a;i++)o[i]=arguments[i+3];t.children=o}return{$$typeof:b,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});const f=u.a.div.withConfig({componentId:"s19ftv2p-0"})(['position: absolute;display: inline-block;text-align: center;width: 10%;top: 50%;left: 50%;margin-left: -20px;margin-top: -20px;:after {content: "";display: block;padding-bottom: 100%;}']),m=u.a.img.withConfig({componentId:"s19ftv2p-1"})(["height: 40px;width: 40px;"]),O=u()(e=>h("div",{role:"progressbar",className:e.className},void 0,e.children)).withConfig({componentId:"s19ftv2p-2"})(["position: absolute;top:0; right:0; left:0; bottom:0;z-index: ",";box-shadow: inset 0px 0px 150px 2000px ",";text-align: center;"],e=>e.zIndex?e.zIndex:1,e=>e.theme.layout.body),j=Object(o.createStructuredSelector)({isNightmode:e=>(e=>!(e.user.prefs.globalTheme!==l))(e)});var p=Object(r.connect)(j)(e=>h(O,{zIndex:e.zIndex},void 0,h(f,{},void 0,h(m,{src:e.isNightmode?`${i.a.assetPath}/img/loader_2orbit_loop.gif`:`${i.a.assetPath}/img/loader_2orbit_loop_nightmode.gif`,alt:"Loading"})))),g=n("./src/chat/components/CloseIcon/index.tsx"),y=n("./src/chat/selectors/app.ts"),_=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}();const E=Object(o.createStructuredSelector)({isHidden:y.e,isReady:y.f,alert:y.b,experiments:y.a});var C=Object(r.connect)(E)(e=>e.isHidden?null:e.isReady&&e.experiments?e.children:_(c.a.Fragment,{},void 0,_(g.a,{}),_(p,{textType:e.alert||"",isFadeOut:e.isReady,zIndex:2}))),v=n("./src/chat/components/ThemeProvider/index.tsx");n.d(t,"a",function(){return S});var I=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}();function S(e,t){return I(v.a,{},void 0,I(e,{},void 0,I(a.b,{component:e=>I(C,{},void 0,I(a.d,{location:e.location},void 0,t))})))}},"./src/chat/components/ThemeProvider/index.tsx":function(e,t,n){"use strict";var s=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/reselect/lib/index.js"),a=n("./bundled-modules/styled-components/styled-components.min.js");const r=Object(c.createSelector)(e=>e.themes.current,e=>({theme:e})),o=a.ThemeProvider;t.a=Object(s.connect)(r)(o)},"./src/chat/constants/batchSizes.ts":function(e,t,n){"use strict";var s;n.d(t,"a",function(){return s}),function(e){e[e.Channels=10]="Channels",e[e.InitChannels=50]="InitChannels",e[e.Messages=40]="Messages"}(s||(s={}))},"./src/chat/constants/promos.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});const s="chat.promo"},"./src/chat/constants/sidebar.ts":function(e,t,n){"use strict";var s;n.d(t,"a",function(){return s}),function(e){e[e.SubredditChannels=0]="SubredditChannels",e[e.DirectChannels=1]="DirectChannels"}(s||(s={}))},"./src/chat/constants/theme.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c});const s={REDDIT:"REDDIT",NIGHT:"NIGHT"},c=s.REDDIT},"./src/chat/constants/toast.ts":function(e,t,n){"use strict";var s;n.d(t,"a",function(){return s}),function(e){e.ConnectionClosed="connectionClosed",e.ConnectionPending="connectionPending",e.ConnectionOpen="connectionOpen"}(s||(s={}))},"./src/chat/controls/Button/index.tsx":function(e,t,n){"use strict";var s,c=n("./node_modules/react/index.js"),a=n.n(c),r=n("./bundled-modules/styled-components/styled-components.min.js"),o=n.n(r),i=n("./src/chat/helpers/styles/mixins/index.tsx"),d=n("./src/chat/controls/Svg/index.tsx"),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),b=e=>a.a.createElement(d.a,u({},e,{viewBox:"0 0 16 16"}),l("path",{d:"M11.829 6.722l1.677-3.145A.802.802 0 0 0 12.8 2.4H3.2a.8.8 0 0 0-.8.8v10.243a.8.8 0 1 0 1.6 0v-2.4h8.8a.799.799 0 0 0 .706-1.176L11.83 6.722z"})),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},f=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}(),m=e=>a.a.createElement(d.a,h({},e,{viewBox:"0 0 16 16"}),f("path",{d:"M12.817 7.491a.798.798 0 0 1-.234.566L9.52 11.12a.798.798 0 0 1-1.132 0l-1.13-1.132-4.292 4.291a.797.797 0 0 1-1.132 0 .8.8 0 0 1 0-1.131l4.292-4.291-1.131-1.132a.8.8 0 0 1 0-1.13L8.057 3.53c.3-.3.831-.3 1.131 0l3.395 3.394c.15.15.234.354.234.566zM3.863 6.263a.8.8 0 0 1-.566-1.366L6.36 1.834a.8.8 0 0 1 1.131 1.131L4.43 6.028a.798.798 0 0 1-.566.235zm10.417 2.36a.8.8 0 0 1 0 1.13l-3.063 3.063a.798.798 0 0 1-1.13 0 .8.8 0 0 1 0-1.131l3.061-3.062a.8.8 0 0 1 1.132 0z"})),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},j=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}(),p=e=>a.a.createElement(d.a,O({},e,{viewBox:"0 0 16 16"}),j("path",{d:"M7.634 10.034L8.67 9H1.8a.8.8 0 1 1 0-1.6h6.869L7.634 6.366a.8.8 0 1 1 1.132-1.132l2.399 2.4a.8.8 0 0 1 0 1.132l-2.4 2.4a.798.798 0 0 1-1.13 0 .8.8 0 0 1 0-1.132zM12.2 1c1.323 0 2.4 1.077 2.4 2.4V13c0 1.323-1.077 2.4-2.4 2.4H6.6A2.403 2.403 0 0 1 4.2 13v-.8a.8.8 0 1 1 1.6 0v.8c0 .44.358.8.8.8h5.6a.8.8 0 0 0 .8-.8V3.4a.8.8 0 0 0-.8-.8H6.6a.8.8 0 0 0-.8.8v.8a.8.8 0 1 1-1.6 0v-.8C4.2 2.077 5.277 1 6.6 1h5.6z",fillRule:"evenodd"})),g=n("./src/chat/icons/svgs/Trash/index.tsx");n.d(t,"a",function(){return x}),n.d(t,"d",function(){return N}),n.d(t,"b",function(){return D}),n.d(t,"f",function(){return T}),n.d(t,"c",function(){return A}),n.d(t,"e",function(){return M});var y=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}();const _=Object(r.css)(["",";vertical-align: middle;border: 1px solid transparent;box-sizing: border-box;border-radius: 4px;cursor: pointer;outline: none;text-align: center;text-transform: uppercase;text-decoration: none;white-space: nowrap;&:focus {outline: none;}"],i.a.smallButtonFont),E=Object(r.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],e=>e.theme.activity.button.active,e=>e.theme.activity.button.active,e=>e.theme.activity.text.highlight,e=>e.theme.activity.text.highlight),C=Object(r.css)(["background-color: ",";border-color: ",";color: ",";svg { fill: ","};"],e=>e.theme.layout.body,e=>e.theme.activity.button.active,e=>e.theme.activity.button.active,e=>e.theme.activity.text.regular),v=Object(r.css)(["background: none;border: none;padding: 0;"]),I=Object(r.css)(["","color: ",";"],v,e=>e.theme.activity.text.active),S=Object(r.css)(["","color: ",";"],v,e=>e.theme.activity.text.fade),w=Object(r.css)(["","color: ",";"],v,e=>e.theme.activity.text.warning),x=o()(e=>e.href?y("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",title:e.title,className:e.className,tabIndex:0},void 0,e.children):y("button",{type:e.type||"button",tabIndex:0,id:e.id,className:e.className,onClick:e.onClick,disabled:e.disabled,title:e.title},void 0,e.children)).withConfig({componentId:"qs5dnm-0"})(["&[disabled] { opacity: 0.6 };display: inline-block;padding: 0.1em 0.8em;transition: background 0.3s;background: ",";height: ",";width: ",";","",";",";",";",";",";"],e=>e.theme.layout.body,e=>e.height?e.height:"auto",e=>e.width?e.width:"auto",_,e=>e.primary?E:"",e=>e.primaryNoBorder?I:"",e=>e.secondary?C:"",e=>e.secondaryNoBorder?S:"",e=>e.warningNoBorder?w:""),N=o()(x).withConfig({componentId:"qs5dnm-1"})(["line-height: normal;padding: 0.1em 0.8em 0.2em;height: 100%;svg {height: 100%;vertical-align: middle;}"]),k=o.a.button.withConfig({componentId:"qs5dnm-2"})(["cursor: pointer;height: 1.25em;outline: none;vertical-align: middle;width: 1.25em;line-height: 0;background: transparent;"]),D=e=>a.a.createElement(k,e,y(b,{})),T=e=>a.a.createElement(k,e,y(g.a,{})),A=e=>a.a.createElement(k,e,y(m,{})),M=e=>a.a.createElement(k,e,y(p,{}))},"./src/chat/controls/Svg/index.tsx":function(e,t,n){"use strict";n("./node_modules/react/index.js");var s,c=n("./bundled-modules/styled-components/styled-components.min.js"),a=n.n(c),r=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.a=a()(e=>r("svg",{className:e.className,viewBox:e.viewBox},void 0,e.children)).withConfig({componentId:"unllzc-0"})(["height: ",";width: ",";vertical-align: middle;transition: all 0.2s;fill: ",";",";"],e=>e.height?e.height:"100%",e=>e.width?e.width:"100%",e=>e.disable?e.theme.activity.icon.disable:e.active?e.theme.activity.icon.active:e.hover?e.theme.activity.icon.hover:e.theme.activity.icon.default,e=>!1!==e.hover?`&:hover {\n        fill: ${e=>e.disable?e.theme.activity.icon.disable:e.theme.activity.icon.hover};\n    };`:"")},"./src/chat/customMiddleware/containerSize.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/once.js"),c=n.n(s),a=n("./src/chat/actions/container.ts"),r=n("./src/chat/constants/container.ts"),o=n("./src/chat/customMiddleware/noop.ts"),i=n("./src/chat/selectors/app.ts"),d=n("./src/lib/cache/index.ts"),u=n("./src/lib/constants/index.ts"),l=n("./src/lib/messageIframeParent/index.ts");const b=r.a.HIDDEN,h=r.a.HIDDEN,f=e=>e&&r.b[e]&&e!==r.a.FULL&&e||b||h;let m;const O=e=>Object(l.a)({type:"resize.chat",data:{size:e,dimensions:r.b[e]}}),j=c()(e=>{const t=e.getState(),n=Object(i.d)(t);let s;s=t.meta.isRedesign?h:n?b:r.a.FULL,e.dispatch(Object(a.sizeChanged)(s)),O(s)});t.a=(e=>{if("undefined"==typeof window)return o.a;const t=e.getState(),n=t.user.account,s=n&&n.id||"unknown";return m=Object(d.c)(u.q.CHAT,"container",s),Object(i.b)(t)||j(e),window.addEventListener("storage",e=>{e.key}),e=>t=>{const n=e(t);switch(t.type){case a.SIZE_CHANGED:{const e=f(t.payload);(e=>{Object(d.d)(m,e,d.a)})(e),O(e);break}}return n}})},"./src/chat/customMiddleware/heartbeat.ts":function(e,t,n){"use strict";var s=n("./src/chat/constants/container.ts"),c=n("./src/chat/tracking/sendEvent.ts"),a=n("./src/telemetry/models/Event.ts"),r=n("./src/chat/tracking/fields/common.ts");const o=e=>{Object(c.a)(Object.assign({noun:"timing",source:a.b.Global,action:a.a.Heartbeat},Object(r.a)(e)))};var i=n("./src/lib/constants/index.ts");t.a=(e=>{let t=e.getState();o(t);const n=()=>{setTimeout(()=>{const e=t.container.size;e!==s.a.EMBED&&e!==s.a.FULL||!document.hasFocus()||o(t),n()},30*i.Vb)};return n(),n=>s=>{const c=n(s);return t=e.getState(),c}})},"./src/chat/customMiddleware/iframeDispatcher.ts":function(e,t,n){"use strict";var s,c=n("./node_modules/lodash/once.js"),a=n.n(c),r=n("./node_modules/react-router-redux/es/index.js"),o=n("./node_modules/url/url.js"),i=n("./src/lib/constants/index.ts"),d=n("./src/lib/messageIframeParent/index.ts"),u=n("./src/chat/actions/channel.ts"),l=n("./src/chat/actions/container.ts"),b=n("./src/chat/actions/message/unreadCount.ts"),h=n("./src/chat/actions/promo/index.ts"),f=n("./src/chat/constants/container.ts"),m=n("./src/chat/customMiddleware/noop.ts"),O=n("./src/chat/helpers/unreadCount.ts"),j=n("./src/chat/helpers/urls/index.ts"),p=n("./src/chat/selectors/promos.ts"),g=n("./src/chat/tracking/events/platform.ts");!function(e){e.Navigate="navigate.chat",e.Websocket="websocket.chat",e.Expand="expand.chat",e.UnreadCount="unreadCount.chat"}(s||(s={}));const y=a()(e=>{window.addEventListener("message",t=>{const n=(e=>{try{return JSON.parse(e.data)}catch(t){return}})(t);if(n)switch(n.type){case s.Navigate:{const t=Object(o.parse)(n.data.href).pathname||j.rootUrl;e.dispatch(Object(r.b)(t)),e.dispatch(Object(l.sizeChanged)(f.a.EMBED));break}case s.Websocket:e.dispatch(Object(b.b)());break;case s.Expand:{const t=e.getState();e.dispatch(Object(l.sizeChanged)(f.a.EMBED));const s=t.platform.currentPage;s&&s.meta&&s.meta.name===i.Qb.CHAT_MINIMIZE&&e.dispatch(Object(u.P)());var c=n.data.telemetry;const a=c.action,r=c.noun,o=c.source;Object(g.a)(t,r,o,a);break}}})});t.a=(e=>"undefined"==typeof window?m.a:(y(e),t=>n=>{switch(n.type){case h.a:case b.a:{const t=Object(p.b)(e.getState()),a=Object.assign({},n.payload);var c=Object(O.a)(a,t);const r=c.unread,o=c.count;Object(d.a)({type:s.UnreadCount,data:{unread:r,count:o}})}}return t(n)}))},"./src/chat/customMiddleware/loggedOutPreferencesSync.ts":function(e,t,n){"use strict";var s=n("./node_modules/js-cookie/src/js.cookie.js"),c=n.n(s),a=n("./node_modules/lodash/pick.js"),r=n.n(a),o=n("./src/config.ts"),i=n("./src/chat/actions/theme.ts");const d=new Set([i.THEME_CHANGED]);t.a=(e=>t=>n=>{const s=t(n);if(d.has(n.type)){const t=e.getState().user,n={prefs:r()(t.prefs,["layout","globalTheme"]),language:t.language};c.a.set("USER",btoa(JSON.stringify(n)),{domain:o.a.cookieDomain})}return s})},"./src/chat/customMiddleware/noop.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});const s=e=>t=>e(t)},"./src/chat/customMiddleware/sendbirdToken.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/defer.js"),c=n.n(s),a=n("./src/lib/constants/index.ts"),r=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/container.ts"),i=n("./src/chat/actions/message/unreadCount.ts"),d=n("./src/chat/actions/platform.ts"),u=n("./src/chat/actions/sendbird/index.ts"),l=n("./src/chat/actions/sendbird/config.ts"),b=n("./src/chat/actions/sendbird/sdk.ts"),h=n("./src/chat/actions/session.ts"),f=n("./src/chat/constants/container.ts"),m=n("./src/chat/constants/sendbird.ts"),O=n("./src/chat/customMiddleware/noop.ts"),j=n("./src/chat/selectors/platform.ts"),p=n("./src/chat/selectors/sendbird.ts");const g=(e,t)=>{const n=t&&t.type===o.SIZE_CHANGED?t.payload:e.container.size,s=n===f.a.MINIMIZED||n===f.a.HIDDEN,c=t&&t.type===d.a?t.payload&&t.payload.routeMatch&&t.payload.routeMatch.route.meta.name===a.Qb.CHAT_MINIMIZE:e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name===a.Qb.CHAT_MINIMIZE;return!s&&c};t.a=(e=>{if("undefined"==typeof window)return O.a;let t;const n=()=>{const n=e.getState().sendbird.session;n.expires&&n.active?(n=>{const s=new Date,c=new Date(n.expires||0),a=Math.floor(.9*(c.getTime()-s.getTime()));t=setTimeout(()=>{e.dispatch(Object(u.m)())},a)})(n):c()(()=>e.dispatch(Object(u.m)()))};let s;Object(j.a)(e.getState())===a.Qb.CHAT_MINIMIZE?c()(async()=>{g(e.getState())?n():(await e.dispatch(Object(u.m)(!1)),e.getState().sendbird.session.token&&await e.dispatch(Object(i.b)()))}):n();return i=>O=>{const j=e.getState(),y=Object(p.b)(j)===m.b.Closed,_=Object(p.e)(j);switch(O.type){case o.SIZE_CHANGED:{if(!O.payload)break;const t=O.payload!==f.a.MINIMIZED&&O.payload!==f.a.HIDDEN;t&&(clearTimeout(s),s=null),y&&t&&!_&&n(),!_||O.payload!==f.a.HIDDEN&&O.payload!==f.a.MINIMIZED||(s=setTimeout(()=>{e.dispatch(Object(b.f)())},10*a.jb));break}case d.a:{const t=g(j,O);y&&t?n():t&&e.dispatch(Object(r.P)());break}case u.h:if(!O.payload)break;if(!O.payload.active)break;c()(async()=>{if(await e.dispatch(Object(l.d)()),O.payload&&O.payload.token){const t=O.payload.token;await e.dispatch(Object(b.e)(t))}});break;case h.b:e.dispatch(Object(b.f)()),clearTimeout(t),clearTimeout(s),t=null,s=null}return i(O)}})},"./src/chat/customMiddleware/title.ts":function(e,t,n){"use strict";var s=n("./src/chat/actions/message/unreadCount.ts"),c=n("./src/chat/customMiddleware/noop.ts");t.a=(()=>{const e="undefined"!=typeof window;if(!e)return c.a;const t=window.document.title;return n=>c=>{const a=n(c);switch(c.type){case s.a:{var r=c.payload;const n=r.basicChannelCount,s=r.subredditChannelCount;e&&(window.document.title=n>0?`(${n}) ${t}`:s>0?`(*) ${t}`:t)}}return a}})},"./src/chat/customMiddleware/tokenRefresher.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/throttle.js"),c=n.n(s),a=n("./src/lib/constants/index.ts"),r=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/session.ts"),i=n("./src/chat/helpers/errors.ts");const d=5*a.jb;t.a=(e=>{const t=c()(()=>{e.dispatch(Object(o.d)())},d);let n,s;const a=()=>{const n=e.getState().user.session;if(!n||!s)return;const c=new Date(n.expires),a=s+Math.floor(.8*(c.getTime()-s));Date.now()>a&&t&&t()},u=e=>{s=Date.now();const c=new Date(e.expires).getTime()-s,a=.8+.1*Math.random(),r=Math.min(Math.floor(a*e.expiresIn*1e3),Math.floor(a*c));n=setTimeout(t,r)},l=e.getState();l.user.session&&u(l.user.session);try{window.parent.addEventListener("focus",a),window.parent.addEventListener("touchend",a),document.body.addEventListener("mouseenter",a)}catch(b){Object(i.b)(`Token Refresher Error: ${b}`)}return e=>t=>(t.type!==o.a&&t.type!==o.c||u(t.payload),t.type===r.w&&a(),t.type===o.b&&(clearTimeout(n),n=null),e(t))})},"./src/chat/customMiddleware/tracking.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/once.js"),c=n.n(s),a=n("./src/lib/logs/timing.js"),r=n("./src/chat/actions/channel.ts"),o=n("./src/chat/actions/message/index.ts"),i=n("./src/chat/actions/platform.ts"),d=n("./src/chat/actions/sendbird/index.ts"),u=n("./src/chat/actions/sidebar.ts"),l=n("./src/chat/constants/channels.ts"),b=n("./src/chat/constants/sidebar.ts"),h=n("./src/chat/selectors/channels.ts"),f=n("./src/chat/selectors/platform.ts"),m=n("./src/chat/tracking/sendEvent.ts"),O=n("./src/telemetry/models/Event.ts"),j=n("./src/telemetry/models/Timer.ts"),p=n("./src/chat/tracking/fields/chat.ts"),g=n("./src/chat/tracking/fields/common.ts");const y=e=>({type:e}),_=e=>({millis:e});var E=n("./src/chat/tracking/events/chatPreview.ts"),C=n("./src/chat/tracking/events/chatView.ts"),v=n("./src/chat/tracking/events/contactsList.ts"),I=n("./src/chat/tracking/events/invitationInbox.ts"),S=n("./src/chat/tracking/events/messagesInbox.ts");const w=c()((e,t)=>((e,t)=>{Object(m.a)(Object.assign({noun:"inbox_new",source:O.b.ChatPerformance,action:O.a.Load,chat:Object.assign({},Object(p.o)(e),Object(p.q)(e)),timer:Object.assign({},y(j.TimerType.ChatLoadInboxNew),_(t))},Object(g.a)(e)))})(e,(e=>Date.now()-e)(t))),x=c()(e=>Object(f.d)(e)&&N(e)),N=e=>{e.sidebarTabs.activeIndex===b.a.DirectChannels?Object(S.e)(e):Object(S.f)(e)},k=Object(a.d)((e,t,n)=>{Object(h.K)(e)?((e,t)=>{Object(m.a)(Object.assign({noun:"channel_cached",source:O.b.ChatPerformance,action:O.a.Load,chat:Object.assign({},Object(p.g)(e)),timer:Object.assign({},y(j.TimerType.ChatLoadChannelCached),_(t))},Object(g.a)(e)))})(t,n):((e,t)=>{Object(m.a)(Object.assign({noun:"channel_new",source:O.b.ChatPerformance,action:O.a.Load,chat:Object.assign({},Object(p.g)(e)),timer:Object.assign({},y(j.TimerType.ChatLoadChannelNew),_(t))},Object(g.a)(e)))})(t,n)}),D=e=>{Object(f.c)(e)===l.a.CREATE&&Object(v.g)(e)};t.a=(e=>t=>n=>s=>{const c=n(s),a=t.getState();switch(s.type){case i.a:w(a,e),D(a);break;case r.p:k(a,!0);break;case r.r:D(a),x(a);break;case r.q:w(a,e),(e=>{Object(f.c)(e)===l.a.VIEW_INVITE&&Object(I.g)(e)})(a),(e=>Object(f.g)(e)&&Object(C.c)(e))(a),k(a),(e=>{Object(f.c)(e)===l.a.VIEW_JOIN&&Object(E.b)(e)})(a);break;case o.k:case d.c:w(a,e);break;case u.b:N(a)}return c})},"./src/chat/customMiddleware/unreadMessageCount.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/debounce.js"),c=n.n(s),a=n("./src/chat/actions/message/unreadCount.ts"),r=n("./src/chat/customMiddleware/noop.ts"),o=n("./src/lib/cache/index.ts"),i=n("./src/lib/constants/index.ts");let d,u;const l=c()(e=>{Object(o.d)(d,e,5*i.jb)},5*i.Vb,{leading:!1,trailing:!0});let b;const h=()=>{b&&clearInterval(b),b=setInterval(()=>{void 0===Object(o.b)(d)&&Object(a.b)()},5*i.jb)};t.a=(e=>{if("undefined"==typeof window)return r.a;const t=e.getState(),n=t.user.account,s=n&&n.id||"unknown";d=Object(o.c)(i.q.CHAT,"unread_message_count",s),l(t.messages.unread.basicChannelCount),h();try{window.parent.addEventListener("focus",h)}catch(c){}return e=>t=>{const n=e(t);switch(t.type){case a.a:{const e=t.payload.basicChannelCount;e!==u&&l(e);break}}return n}})},"./src/chat/endpoints/accounts/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var s=n("./src/lib/constants/index.ts"),c=n("./src/lib/makeApiRequest/index.ts");const a=async e=>Object(c.c)(e,{endpoint:`${e.apiUrl}/api/v1/me`,method:s.ib.GET,data:{raw_json:1}}),r=async(e,t)=>Object(c.c)(e,{data:{account_id:t,raw_json:1},endpoint:`${e.apiUrl}/api/block_user`,method:s.ib.POST}),o=async(e,t)=>Object(c.c)(e,{endpoint:`${e.apiUrl}/user/${t}/about`,method:s.ib.GET,data:{raw_json:1}})},"./src/chat/endpoints/users/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return b});var s=n("./src/lib/constants/index.ts"),c=n("./src/lib/makeApiRequest/index.ts"),a=n("./src/lib/omitHeaders/index.ts"),r=n("./src/reddit/constants/headers.ts"),o=n("./src/chat/models/Message/report.ts");const i=(e,t)=>Object(c.c)(e,{method:s.ib.POST,endpoint:`${e.apiUrl}/api/report_user`,data:{reason:t.reason,user:t.userNickname}}),d=(e,t,n)=>{const a=Object(o.d)(t,n);return Object(c.c)(e,{method:s.ib.POST,endpoint:`${e.apiUrl}/api/report_user`,data:{details:JSON.stringify(a),reason:t.reason,user:t.userNickname}})},u=(e,t)=>Object(c.c)(e,{method:s.ib.GET,endpoint:`${e.apiUrl}/api/user_data_by_account_ids`,data:{raw_json:1,ids:t.join(",")}}),l=e=>Object(c.c)(e,{method:s.ib.GET,endpoint:`${e.apiUrl}/prefs/blocked.json`}),b=e=>Object(c.c)(Object(a.a)(e,[r.a]),{method:s.ib.POST,endpoint:`${e.apiUrl}/api/seen_subreddit_chat_ftux`})},"./src/chat/helpers/dom.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});const s=e=>t=>{if(t.preventDefault(),e&&"function"==typeof e)return e(t)},c=e=>t=>{if(t.preventDefault(),t.stopPropagation(),e&&"function"==typeof e)return e(t)}},"./src/chat/helpers/errors.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});class s extends Error{constructor(e,t){super(`Invalid Value: '${e} is ${t}'`)}}const c=e=>{0}},"./src/chat/helpers/linkParser/index.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return o});var s=n("./src/lib/linkMatchers/index.ts");const c=e=>!!s.c.test(e),a=(e,t,n)=>{const s=[];let c=0;return t.forEach(({index:t,lastIndex:a,text:r,url:o,schema:i})=>{const d="mailto:"===i?"_self":"_blank";s.push(e.substring(c,t)),s.push(n(o,r,d,i)),c=a}),s.push(e.substring(c,e.length)),s},r=/^(((file|https?|ftps?):)?\/|mailto:)/i,o=e=>{if(void 0===e)return e;return e.match(r)?e:"#"};t.a=((e,t,n)=>{const c=Object(s.a)(e,t);return c&&c.length?a(e,c,n):e})},"./src/chat/helpers/styles/functions/index.tsx":function(e,t,n){"use strict";function s(e="all",t="0.2s"){return`transition: ${e} ${t};`}n.d(t,"a",function(){return s})},"./src/chat/helpers/styles/mixins/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return b}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"f",function(){return m}),n.d(t,"g",function(){return O}),n.d(t,"e",function(){return j});var s=n("./node_modules/lodash/omit.js"),c=n.n(s),a=n("./bundled-modules/styled-components/styled-components.min.js"),r=n("./src/reddit/helpers/styles/mixins/fonts.tsx"),o=n("./src/chat/helpers/styles/functions/index.tsx");const i=Object(a.css)(["color: ",";",";-moz-osx-font-smoothing: grayscale;"],e=>e.theme.activity.text.regular,Object(o.a)("color")),d=c()(r,["BODY_FONT_FAMILY","CODE_FONT_FAMILY"]),u={usernameFont:"\n    font-size: 13px;\n    line-height: 15px;\n  "};const l=function(e){for(const t in e)e[t]=Object(a.css)(["","",""],i,e[t]);return e}(Object.assign({},d,u)),b=Object(a.css)(["outline: none;&:focus {box-shadow: 0 0 3px 1px ",";}"],e=>e.theme.activity.input.focusBg),h=Object(a.css)(["color: ",";"],e=>e.theme.activity.link.staticText),f=Object(a.css)(["",";",";cursor: pointer;border-bottom: 1px solid ",";&:hover{color: ",";border-bottom: 1px solid ",";}"],h,Object(o.a)(),e=>e.theme.activity.link.staticUnderline,e=>e.theme.activity.link.hoverText,e=>e.theme.activity.link.hoverText),m=Object(a.css)(["word-break: break-all;line-break: strict;overflow-wrap: break-word;word-break: break-word;word-break: break-all;word-wrap: break-word;hyphens: auto;"]),O=Object(a.css)(["display: inline-block;overflow-wrap: break-word;word-wrap: break-word;a {","}"],m),j=Object(a.css)(["width: 2em;height: 2em;padding: 0;box-sizing: content-box;border: 0;transition: background 0.3s;"])},"./src/chat/icons/svgs/ChatNew/index.tsx":function(e,t,n){"use strict";var s,c=n("./node_modules/react/index.js"),a=n.n(c),r=n("./src/chat/controls/Svg/index.tsx"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.a=(e=>a.a.createElement(r.a,o({},e,{viewBox:"0 0 16 16"}),i("path",{d:"M10.625 8.656h-1.97v1.97c0 .36-.293.655-.655.655-.362 0-.656-.293-.656-.655v-1.97h-1.97c-.36 0-.655-.293-.655-.655 0-.362.293-.656.655-.656h1.97v-1.97c0-.36.293-.655.655-.655.362 0 .656.293.656.655v1.97h1.97c.36 0 .655.293.655.655 0 .362-.293.656-.655.656M8 1C4.14 1 1 4.14 1 8c0 1.222.317 2.372.87 3.373l-.824 2.476c-.105.313-.024.66.21.894.167.167.39.256.62.256.09 0 .185-.015.275-.045l2.478-.825c1 .553 2.15.87 3.372.87 3.86 0 7-3.14 7-7s-3.14-7-7-7"})))},"./src/chat/icons/svgs/NavClose/index.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var s,c=n("./node_modules/react/index.js"),a=n.n(c),r=n("./src/chat/controls/Svg/index.tsx"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});const d=e=>a.a.createElement(r.a,o({},e,{viewBox:"0 0 20 20"}),i("path",{d:"M11.105 9.75l4.114-4.114a.957.957 0 1 0-1.355-1.355L9.75 8.395 5.636 4.281a.957.957 0 1 0-1.355 1.355L8.395 9.75l-4.114 4.114a.957.957 0 1 0 1.355 1.355l4.114-4.114 4.114 4.114a.956.956 0 0 0 1.355 0 .957.957 0 0 0 0-1.355L11.105 9.75z",fillRule:"evenodd"}));d.displayName="NavClose"},"./src/chat/icons/svgs/Trash/index.tsx":function(e,t,n){"use strict";var s,c=n("./node_modules/react/index.js"),a=n.n(c),r=n("./src/chat/controls/Svg/index.tsx"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});t.a=(e=>a.a.createElement(r.a,o({},e,{viewBox:"0 0 16 16"}),i("path",{d:"M10.845 11.6c0 .22-.182.4-.407.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.225 0 .407.18.407.4v4.4zm-2.438 0c0 .22-.183.4-.407.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.224 0 .407.18.407.4v4.4zm-2.439 0c0 .22-.182.4-.406.4a.403.403 0 0 1-.406-.4V7.2c0-.22.182-.4.406-.4.224 0 .406.18.406.4v4.4zm6.426-6.8c.225 0 .406.18.406.4v8c0 .662-.547 1.2-1.219 1.2H4.42c-.672 0-1.219-.538-1.219-1.2v-8c0-.22.181-.4.407-.4h8.787zm0-2.4c.224 0 .406.18.406.4v.8c0 .22-.182.4-.407.4H3.606a.403.403 0 0 1-.406-.4v-.8c0-.22.182-.4.406-.4H6.01l.602-.666a.411.411 0 0 1 .304-.134h2.166c.116 0 .226.049.304.134l.602.666h2.404z",fillRule:"evenodd"})))},"./src/chat/models/Channel/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var s=n("./src/chat/models/Channel/subreddit.ts"),c=n("./src/chat/models/Channel/utils/index.ts"),a=n("./src/chat/models/Channel/utils/removeSendbirdPrefix.ts"),r=n("./src/chat/models/User/inviter.ts"),o=n("./src/chat/models/User/member.ts");function i(e,t){return{channelId:Object(a.a)(e.channel_url),channelSendbirdUrl:e.channel_url,channelState:Object(c.b)(t),fetchingFirstMessage:!1,fetchingMessages:!1,fetchingMessagesError:!1,hasMoreMessages:!1,isMessageListLoaded:!1,inviter:Object(r.b)(e.inviter),coverUrl:e.cover_url,createdAt:e.created_at,customType:e.custom_type,data:e.data,maxLengthMessage:-1,memberCount:e.member_count,name:e.name,type:Object(c.d)(e),lastMessage:void 0,unreadMessageCount:e.unread_message_count,unreadMentionCount:e.unread_mention_count,members:Object(o.a)(e.members),customData:Object(s.d)(e.data)}}},"./src/chat/models/Contact/index.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return r}),n.d(t,"b",function(){return o});var s=n("./src/lib/constants/index.ts");function c(e){return e?e.map(r).filter(e=>!!e):[]}const a=3;function r(e){if(e.contact_account_id||e.id)return{id:e.contact_account_id||`${s.vb.ACCOUNT}_${e.id}`,name:e.name,lastInteraction:e.last_interaction,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}const o={id:"",name:"",profileImg:"",lastInteraction:0,created:0,linkKarma:0,commentKarma:0,isNSFW:!1}},"./src/chat/models/Message/report.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o});var s=n("./src/chat/helpers/errors.ts");const c=function(e,t){return e.sender?{channelUrl:e.channelSendbirdUrl,channelType:e.channelType,createdAt:e.createdAt,customData:e.data,customType:e.customType,messageBody:e.messageData.value,messageId:e.messageId,userId:e.sender.userId,fileUrl:"",reason:t,userNickname:e.sender.nickname}:Object(s.b)(`\n      Error reporting message: ${e.messageId}.\n      The sender is unknown.\n    `)},a=(e,t)=>t?{sendbirdChatMessage:e,sendbirdEphemeralChatLog:t}:{sendbirdChatMessage:e},r=function(e,t){return e.reduce((e,n)=>{const s=c(n,t);return s&&e.push(s),e},[])},o=function(e,t){return e.find(e=>e.messageId===t.messageId)}},"./src/chat/models/Theme/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var s=n("./node_modules/polished/dist/polished.es.js"),c=n("./src/reddit/constants/theme.ts"),a=n("./src/reddit/models/Theme/index.ts"),r=n("./src/chat/constants/theme.ts"),o=n("./src/reddit/constants/colors.ts");const i=c.b.REDDIT,d=c.b.NIGHT,u=e=>a.d[e].newRedditTheme,l={activity:{icon:{default:Object(s.a)(.3,o.a.white),active:o.a.op,disable:Object(s.a)(.5,o.a.white),hover:Object(s.a)(.5,o.a.white),contrast:u(i).bodyText,nsfw:{bg:o.a.black,text:o.a.white}},text:{regular:u(i).bodyText,active:o.a.op,fade:Object(s.a)(.4,o.a.white),light:u(i).actionIcon,warning:o.a.warning,highlight:o.a.white,success:o.a.approved},button:{active:o.a.alienblue},send:{disable:Object(s.a)(.5,o.a.white),hover:Object(s.a)(.08,o.a.op)},checkbox:{checked:o.a.alienblue,checkmark:o.a.white,unchecked:u(i).body,uncheckedBorder:Object(s.a)(.3,o.a.white)},input:{border:o.a.defaultFlair,focusColor:o.a.white,focusBg:o.a.approved,ownerBg:u(i).line,color:u(i).bodyText,error:o.a.warning,channelRename:Object(s.a)(.1,o.a.white)},link:{staticUnderline:o.a.alienblue,staticText:o.a.op,hoverText:o.a.snoo}},layout:{body:u(i).body,colsBorder:u(i).line,header:{counterBg:o.a.snoo,counterText:o.a.white},scrollbar:Object(s.a)(.4,o.a.white)},message:{list:{item:{ownerBg:u(i).inactive,button:u(i).actionIcon}}},subreddit:{iconBg:o.a.alienblue},sidebar:{background:Object(s.e)(Object(s.a)(.3,o.a.white),.1),subreddit:{background:{active:o.a.alienblue,hover:u(i).canvas}},basic:{background:{active:o.a.alienblue,hover:u(i).canvas}},text:{divider:Object(s.a)(.5,o.a.white)}},toast:{pending:o.a.black,success:o.a.approved}},b={activity:{icon:{default:Object(s.a)(.3,o.a.white),active:o.a.op,disable:Object(s.a)(.5,o.a.white),hover:Object(s.a)(.5,o.a.white),contrast:Object(s.a)(.4,u(d).bodyText),nsfw:{bg:o.a.black,text:o.a.white}},text:{regular:u(d).bodyText,active:o.a.op,fade:Object(s.a)(.4,o.a.white),light:u(d).actionIcon,warning:o.a.warning,highlight:o.a.white,success:o.a.approved},button:{active:o.a.alienblue},send:{disable:Object(s.a)(.5,o.a.white),hover:Object(s.a)(.08,o.a.op)},checkbox:{checked:o.a.alienblue,checkmark:o.a.white,unchecked:u(d).body,uncheckedBorder:Object(s.a)(.3,o.a.white)},input:{border:o.a.defaultFlair,focusColor:o.a.white,focusBg:o.a.approved,ownerBg:u(d).line,color:u(d).bodyText,error:o.a.warning,channelRename:Object(s.a)(.1,o.a.white)},link:{staticUnderline:o.a.alienblue,staticText:o.a.op,hoverText:o.a.snoo}},layout:{body:u(d).body,colsBorder:u(d).line,header:{counterBg:o.a.snoo,counterText:o.a.white},scrollbar:Object(s.a)(.4,u(d).bodyText)},message:{list:{item:{ownerBg:u(d).inactive,button:u(d).actionIcon}}},subreddit:{iconBg:o.a.alienblue},sidebar:{background:Object(s.e)(Object(s.a)(.4,o.a.white),.1),subreddit:{background:{active:o.a.alienblue,hover:Object(s.f)(.2,u(d).canvas)}},basic:{background:{active:o.a.alienblue,hover:Object(s.f)(.2,u(d).canvas)}},text:{divider:Object(s.a)(.5,o.a.white)}},toast:{pending:o.a.black,success:o.a.approved}},h={[r.b.REDDIT]:l,[r.b.NIGHT]:b}},"./src/chat/models/User/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var s=n("./src/lib/constants/index.ts"),c=n("./src/lib/convertToCamelCase/index.ts");const a=`${s.vb.ACCOUNT}_`,r=e=>{const t={};for(const n in e)t[n]=o(Object.assign({id:n},e[n]));return t};function o(e){return{id:e.id,name:e.name,created:e.created_utc,linkKarma:e.link_karma,commentKarma:e.comment_karma,profileImg:e.profile_img,isNSFW:e.profile_over_18}}const i=e=>{const t=(e=>(e&&e.id&&(e.id.includes(a)?e.id=e.id:e.id=a+e.id),e))(e);return Object(c.a)(t)}},"./src/chat/pageLoaders/async.ts":function(e,t,n){"use strict";var s,c=n("./src/lib/constants/index.ts"),a=n("./node_modules/react/index.js"),r=n.n(a),o=n("./src/chat/strings/index.ts"),i=n("./src/config.ts"),d=n("./bundled-modules/styled-components/styled-components.min.js"),u=n.n(d),l=n("./src/chat/components/CloseIcon/index.tsx"),b=n("./src/chat/controls/Button/index.tsx"),h=n("./src/chat/helpers/styles/mixins/index.tsx"),f=(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,c){var a=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={}),t&&a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);else t||(t=a||{});if(1===r)t.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];t.children=i}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}});const m=u.a.h2.withConfig({componentId:"tfcdf4-0"})(["",";padding: 0;margin: 0;"],h.a.titleFontH4),O=u.a.p.withConfig({componentId:"tfcdf4-1"})(["",";padding: 0;margin: 0;"],h.a.titleFontH5),j=u.a.div.withConfig({componentId:"tfcdf4-2"})(["display: table;width: 100%;height: 100%;"]),p=u.a.div.withConfig({componentId:"tfcdf4-3"})(["display: table-cell;vertical-align: middle;text-align: center;"]),g=e=>f(j,{className:e.className},void 0,f(p,{},void 0,e.children));var y=n("./src/chat/icons/svgs/ChatNew/index.tsx"),_=n("./src/chat/helpers/urls/index.ts"),E=n("./node_modules/react-router-dom/es/index.js"),C=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}();const v=u.a.div.withConfig({componentId:"s19o1wft-0"})(["display: inline-block;padding: 10px;"]),I=u.a.img.withConfig({componentId:"s19o1wft-1"})(["vertical-align: middle;display: inline-block;height: 180px;width: 180px;"]),S=u.a.div.withConfig({componentId:"s19o1wft-2"})(["vertical-align: middle;display: inline-block;max-width: 250px;padding: 20px 0 20px 30px;text-align: left;"]),w=u()(m).withConfig({componentId:"s19o1wft-3"})(["padding-bottom: 10px;font-weight: bold;"]),x=u()(b.a).withConfig({componentId:"s19o1wft-4"})(["font-size: 1em;height: 2.4em;margin-top: 1em;padding: 0.2em 2em;"]);var N=()=>C(g,{},void 0,C(l.a,{}),C(v,{},void 0,C(I,{src:`${i.a.assetPath}/img/chat/empty-hero.png`}),C(S,{},void 0,C(w,{},void 0,Object(o.a)("en","app.chat.emptyState.title")),C(O,{},void 0,Object(o.a)("en","app.chat.emptyState.main"),C(E.a,{to:Object(_.channelUrl)("create")},void 0,C(x,{primary:!0},void 0,C(y.a,{width:"1em"})," ",Object(o.a)("en","app.chat.actions.new"))))))),k=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,s,c){var a=t&&t.defaultProps,r=arguments.length-3;if(n||0===r||(n={}),n&&a)for(var o in a)void 0===n[o]&&(n[o]=a[o]);else n||(n=a||{});if(1===r)n.children=c;else if(r>1){for(var i=Array(r),d=0;d<r;d++)i[d]=arguments[d+3];n.children=i}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:n,_owner:null}}}();class D extends r.a.Component{render(){return k(N,{})}}class T extends r.a.Component{render(){return null}}t.a=(e=>()=>{switch(e){case c.r.CHAT:return n.e("ChatPage").then(n.bind(null,"./src/chat/pages/Chat.tsx")).then(e=>e.default);case c.r.CHAT_EMPTY:return Promise.resolve(D);case c.r.CHAT_MINIMIZE:return Promise.resolve(T);default:throw new Error(`Route is not defined for '${e}'.`)}})},"./src/chat/reducers/index.ts":function(e,t,n){"use strict";var s=n("./node_modules/redux/es/index.js"),c=n("./src/app/reducers/tooltipId/index.ts"),a=n("./src/chat/actions/channel.ts");var r=(e=!1,t)=>{switch(t.type){case a.r:return!0;default:return e}},o=n("./node_modules/lodash/uniq.js"),i=n.n(o),d=n("./src/chat/models/Channel/index.ts"),u=n("./src/chat/models/Channel/utils/index.ts");const l={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]};var b=(e=l,t)=>{switch(t.type){case a.h:return Object.assign({},e,{fetchingChannels:!0});case a.i:return Object.assign({},e,{fetchingChannels:!1});case a.a:{var n=t.payload;const s=n.channels,c=n.hasMoreChannels,a=Object(u.c)(s,[d.a.Direct,d.a.Group]);if(!a)return e;const r=Object.keys(a),o=c&&!!r.length;return Object.assign({},e,{fetchingChannels:!1,hasMoreChannels:o,sortedKeys:[...e.sortedKeys,...r]})}case a.t:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)})}case a.v:case a.m:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)})}case a.y:{const n=t.payload.channel.channelId;return e.sortedKeys.indexOf(n)>-1?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)}):e}case a.x:{const n=t.payload.channel;return e.sortedKeys.includes(n.channelId)?e:Object.assign({},e,{sortedKeys:i()([n.channelId,...e.sortedKeys])})}default:return e}};var h=(e=!1,t)=>{switch(t.type){case a.c:return!1;case a.g:return!0;default:return e}};var f=n("./src/chat/actions/message/index.ts");const m={fetchingChannels:!1,hasMoreChannels:!0,sortedKeys:[]};var O=(e=m,t)=>{switch(t.type){case a.j:return Object.assign({},e,{fetchingChannels:!0});case a.k:return Object.assign({},e,{fetchingChannels:!1});case a.b:{var n=t.payload;const s=n.channels,c=n.hasMoreChannels,a=Object(u.c)(s,[d.a.Direct,d.a.Group]);if(!a)return e;const r=Object.keys(a),o=c&&!!r.length;return Object.assign({},e,{fetchingChannels:!1,hasMoreChannels:o,sortedKeys:[...e.sortedKeys,...r]})}case a.v:case a.m:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)})}case a.t:{const n=t.payload.channelId;return Object.assign({},e,{sortedKeys:[n,...e.sortedKeys]})}case a.f:{const n=Object.keys(t.payload);return Object.assign({},e,{sortedKeys:i()([...n,...e.sortedKeys])})}case a.u:case f.a:{const n=t.payload.channelId;return e.sortedKeys.includes(n)?Object.assign({},e,{sortedKeys:i()([n,...e.sortedKeys])}):e}default:return e}},j=n("./node_modules/lodash/first.js"),p=n.n(j),g=n("./node_modules/lodash/omit.js"),y=n.n(g),_=n("./node_modules/lodash/reduce.js"),E=n.n(_),C=n("./src/chat/actions/channel/dropdown.ts"),v=n("./src/chat/actions/channel/subreddit.ts"),I=n("./src/chat/actions/message/inboxScroller.ts"),S=n("./src/chat/constants/channels.ts");const w={};var x=(e=w,t)=>{switch(t.type){case a.f:return Object.assign({},e,t.payload);case a.b:case a.a:case v.e:case v.f:{const n=t.payload.channels,s=E()(e,(e,t,s)=>n[s]&&t.channelState===S.b.PARTIAL&&(e[s]=n[s])&&e||e,{});return Object.assign({},n,e,s)}case v.g:return Object.assign({},t.payload.channels,e);case a.o:{const n=t.payload,s=e[n];return!s||s&&0===s.unreadMessageCount?e:Object.assign({},e,{[n]:Object.assign({},s,{unreadMessageCount:0,unreadMentionCount:0})})}case a.t:case v.b:{const n=t.payload.channelId,s=Object.assign({},e[n],{channelState:S.b.JOINED});return Object.assign({},e,{[s.channelId]:s})}case a.y:{const n=t.payload.channel,s=e[n.channelId],c=Object.assign({},s,y()(n,"hasMoreMessages","isMessageListLoaded")),a={[n.channelId]:c};return Object.assign({},e,a)}case v.m:case a.x:{const n=t.payload.channel,s=e[n.channelId],c=Object.assign({},s,n,{channelState:S.b.INVITED}),a={[n.channelId]:c};return Object.assign({},e,a)}case a.w:{const n=t.payload.channel;return Object.assign({},e,{[n.channelId]:n})}case a.m:{const n=t.payload.channelId;return y()(e,n)}case a.v:{const n=t.payload.channelId,s=Object.assign({},e[n],{channelState:S.b.UNSORTED});return Object.assign({},e,{[s.channelId]:s})}case C.a:{var n=t.payload;const s=n.channelId,c=n.name,a=Object.assign({},e[s],{name:c});return Object.assign({},e,{[s]:Object.assign({},a)})}case f.a:{const n=t.payload.channelId,s=Number(p()(Object.keys(t.payload.message))),c=Object.assign({},e[n],{lastMessage:t.payload.message[s]});return Object.assign({},e,{[n]:c})}case f.g:{const n=t.payload;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingMessages:!0,fetchingMessagesError:!1})})}case f.b:case f.e:{var s=t.payload;const n=s.hasMore,c=s.channelId;return Object.assign({},e,{[c]:Object.assign({},e[c],{isMessageListLoaded:!0,hasMoreMessages:n,fetchingMessages:!1,fetchingMessagesError:!1})})}case f.f:{const n=t.payload;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingMessages:!1,fetchingMessagesError:!0})})}case a.l:{const n=t.payload.channelId;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingFirstMessage:!0})})}case a.s:{var c=t.payload;const n=c.channelId,s=c.firstMessageId;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingFirstMessage:!1,firstMessageId:s})})}case I.b:{const n=t.payload.channelId;return Object.assign({},e,{[n]:Object.assign({},e[n],{hasMoreMessages:!0})})}default:return e}};const N={channelId:void 0,isLoaded:!1};var k=(e=N,t)=>{switch(t.type){case a.p:{const n=Object.assign({},e,{isLoaded:!1});if(t.payload){const e=t.payload.channelId;e&&(n.channelId=e)}return n}case a.q:return Object.assign({},e,{isLoaded:!0});case a.v:case a.m:return t.payload.channelId!==e.channelId?e:Object.assign({},e,{channelId:""});default:return e}};const D={sortedKeys:[]};var T=(e=D,t)=>{switch(t.type){case v.a:return{sortedKeys:[t.payload.channelId]};default:return e}};const A={fetchingChannels:!1,hasMoreChannels:!1,sortedKeys:[]};var M=(e=A,t)=>{switch(t.type){case v.h:return Object.assign({},e,{fetchingChannels:!0});case v.i:return Object.assign({},e,{fetchingChannels:!1});case v.e:{var n=t.payload;const s=n.channels,c=n.hasMoreChannels,a=Object(u.e)(s,"name"),r=Object.keys(a);return r.length?{fetchingChannels:!1,hasMoreChannels:c&&!!r,sortedKeys:[...r]}:e}case a.v:case a.m:case v.b:{const n=t.payload.channelId;return e.sortedKeys.includes(n)?Object.assign({},e,{sortedKeys:e.sortedKeys.filter(e=>e!==n)}):e}case v.m:{const n=t.payload.channel;return Object.assign({},e,{sortedKeys:i()([n.channelId,...e.sortedKeys])})}default:return e}};const L={fetchingChannels:!1,sortedKeys:{}},R=(e,t,n)=>Object.assign({},e,{[t.toLowerCase()]:e[t.toLowerCase()].filter(e=>e!==n)});var H=(e=L,t)=>{switch(t.type){case v.j:return Object.assign({},e,{fetchingChannels:!0});case v.k:return Object.assign({},e,{fetchingChannels:!1});case v.b:case v.f:{const e=t.payload.sortedKeys;return{fetchingChannels:!1,sortedKeys:Object.assign({},e)}}case a.v:case a.m:{var n=t.payload;const s=n.channelId,c=n.subredditName,a=c&&c.toLowerCase();if(!e.sortedKeys[a]||!e.sortedKeys[a].includes(s))return e;const r=e.sortedKeys[a].length<=1?y()(e.sortedKeys,a):R(e.sortedKeys,a,s);return Object.assign({},e,{sortedKeys:r})}case a.w:{const n=e.sortedKeys,s=t.payload.channel.channelId;for(const t in n)e.sortedKeys[t.toLowerCase()].includes(s)&&R(n,t.toLowerCase(),s);return Object.assign({},e,{sortedKeys:n})}default:return e}};const P={sortedKeys:[]};var U=(e=P,t)=>{switch(t.type){case v.c:return{sortedKeys:[t.payload.channelId]};default:return e}};const B={fetchingChannels:!1,firstLoaded:!1,sortedKeys:[]};var G=(e=B,t)=>{switch(t.type){case v.l:return Object.assign({},e,{firstLoaded:!0,fetchingChannels:!0});case v.g:{const n=t.payload.channels,s=Object.keys(n);return s.length?{fetchingChannels:!1,firstLoaded:e.firstLoaded,sortedKeys:[...s]}:e}default:return e}},K=Object(s.c)({banned:T,invited:M,joined:H,kicked:U,recommended:G}),F=Object(s.c)({isCreatingChannel:(e=!1,t)=>{switch(t.type){case a.e:return!0;case a.f:case a.d:return!1;default:return e}},firstLoaded:r,inviteListExpanded:h,invited:b,joined:O,models:x,selected:k,subreddit:K}),V=n("./src/chat/actions/user.ts");var z=(e=!1,t)=>{switch(t.type){case V.b:return!0;default:return e}},q=n("./node_modules/lodash/values.js"),$=n.n(q),Q=n("./src/chat/actions/sendbird/index.ts");const J="search",W="contacts",Y={};var Z=(e=Y,t)=>{switch(t.type){case Q.g:return Object.assign({},e,t.payload.reduce((e,t)=>(e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:W},e),{}));case Q.b:return Object.assign({},t.payload.reduce((e,t)=>(e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:W},e),{}),e);case Q.d:{const n=t.payload.username;return Object.assign({},e,{[n]:{loaded:!1,userId:null,valid:!1,method:J}})}case Q.e:{var n=t.payload;const s=n.contact,c=n.username,a=!!(n.valid&&s&&s.id);return Object.assign({},e,{[c.toLowerCase()]:{loaded:!0,userId:s?s.id:null,valid:a,method:J}})}case V.i:{const n=t.payload;return Object.assign({},e,$()(n).reduce((e,t)=>(e[t.name.toLowerCase()]={loaded:!0,userId:t.id,valid:!0,method:J},e),{}))}case V.c:{const n=t.payload.username;return n?y()(e,n):e}default:return e}};const X={};var ee=(e=X,t)=>{switch(t.type){case Q.g:return Object.assign({},e,t.payload.reduce((t,n)=>(t[n.id]=Object.assign({},e[n.id],n),t),{}));case Q.e:{const n=t.payload.contact;return n?Object.assign({},e,{[n.id]:n}):e}case V.i:return Object.assign({},e,t.payload||{});case V.c:{const n=t.payload.userId;return n?Object.assign({},e,{[n]:Object.assign({},e[n],{isBlocked:!0})}):e}case V.b:{const n=t.payload.blockedContacts;return Object.assign({},e,n)}default:return e}};const te=[];var ne=(e=te,t)=>{switch(t.type){case V.h:return[...e,t.payload];case V.k:return e.filter(e=>e!==t.payload);case V.j:return te;default:return e}};const se=[];var ce=(e=se,t)=>{switch(t.type){case Q.g:return[...e,...t.payload.map(e=>e.id)];case V.c:return e.filter(e=>e!==t.payload.userId);default:return e}},ae=Object(s.c)({fetchedBlockedUsers:z,knownContacts:Z,models:ee,selectedUserIds:ne,suggestedKeys:ce}),re=n("./src/chat/actions/container.ts"),oe=n("./src/chat/constants/container.ts");const ie={size:oe.a.EMBED};var de=(e=ie,t)=>{switch(t.type){case re.SIZE_CHANGED:if(oe.b[t.payload])return Object.assign({},e,{size:t.payload});default:return e}},ue=n("./src/lib/makeActionCreator/index.ts"),le=n("./src/lib/constants/index.ts");n("./src/lib/makeApiRequest/index.ts");Object(ue.a)("EMOJIS__FETCH_EMOJIS_FAILED"),Object(ue.a)("EMOJI__ADD_EMOJIS");const be={snoomojis:{}};var he=(e=be,t)=>{switch(t.type){case"EMOJI__ADD_EMOJIS":{const e=t.payload.snoomojis;return{snoomojis:Object.assign({},e)}}default:return e}},fe=n("./node_modules/lodash/toArray.js"),me=n.n(fe),Oe=n("./node_modules/lodash/uniqBy.js"),je=n.n(Oe),pe=n("./src/chat/actions/members.ts");const ge={};var ye=(e=ge,t)=>{switch(t.type){case pe.b:{const n=t.payload.channelId;return Object.assign({},e,{[n]:Object.assign({},e[n],{fetchingMembers:!0})})}case pe.c:{var n=t.payload;const s=n.channelId,c=n.hasMoreMembers;return Object.assign({},e,{[s]:Object.assign({},e[s],{hasMoreMembers:c,fetchingMembers:!1})})}case pe.a:{var s=t.payload;const n=s.channelId,c=s.members,a=me()(c),r=e[n]&&e[n].model||[],o=je()([...r,...a],"id");return Object.assign({},e,{[n]:Object.assign({},e[n],{model:o})})}case pe.d:return{};default:return e}};var _e=(e=!1,t)=>{switch(t.type){case f.b:case f.k:return!0;default:return e}};const Ee={};var Ce=(e=Ee,t)=>{switch(t.type){case f.b:{const n=t.payload.messages;return Object.assign({},e,n)}case f.a:return Object.assign({},e,t.payload.message);case f.h:return Object.assign({},e,t.payload);case f.d:case f.i:return y()(e,t.payload);case f.e:{const n=t.payload.messages;return Object.assign({},e,n)}case a.n:{const n=t.payload;return Object.assign({},y()(e,...n))}case I.a:{const n=t.payload.messageIdList;return y()(e,n)}default:return e}};const ve={};var Ie=(e=ve,t)=>{switch(t.type){case f.c:{const n=t.payload;return Object.assign({},e,{[n.clientMessageId]:n})}case f.l:{var n=t.payload;const s=n.clientMessageId,c=n.toggle;if(s){const t=e[s];return Object.assign({},e,{[s]:Object.assign({},t,{error:c})})}return Object.assign({},e)}case f.a:case f.j:{const n=t.payload.clientMessageId;return Object.assign({},n?y()(e,n):e)}default:return e}},Se=n("./node_modules/lodash/isEqual.js"),we=n.n(Se),xe=n("./src/chat/actions/message/unreadCount.ts");const Ne={basicChannelCount:0,subredditChannelCount:0,subredditMentionCount:0};var ke=(e=Ne,t)=>{switch(t.type){case xe.a:return we()(e,t.payload)?e:Object.assign({},e,t.payload)}return e},De=Object(s.c)({firstLoaded:_e,models:Ce,pending:Ie,unread:ke}),Te=n("./src/chat/reducers/meta/index.ts"),Ae=n("./src/chat/reducers/platform/index.ts"),Me=n("./src/chat/reducers/promos/index.ts"),Le=n("./src/chat/actions/sendbird/config.ts");const Re={maxMessageLength:void 0};var He=(e=Re,t)=>{switch(t.type){case Le.b:return Object.assign({},e,t.payload);default:return e}};const Pe={host:void 0};var Ue=(e=Pe,t)=>{switch(t.type){case Le.c:return Object.assign({},e,t.payload);default:return e}},Be=n("./src/chat/actions/sendbird/sdk.ts"),Ge=n("./src/chat/constants/sendbird.ts");const Ke={connectionStatus:Ge.b.Closed,initialized:!1};var Fe=(e=Ke,t)=>{switch(t.type){case Be.a:return Object.assign({},e,{initialized:!0,connectionStatus:Ge.b.Open});case Be.c:{const n=Object.assign({},t.payload);return Object.assign({},e,{error:n,connectionStatus:Ge.b.Closed})}case Be.b:return Object.assign({},e,{connectionStatus:Ge.b.Closed});case Be.d:{const n=t.payload.connectionStatus;return Object.assign({},e,{connectionStatus:n})}default:return e}};const Ve={expires:void 0,token:void 0,active:!1};var ze=(e=Ve,t)=>{switch(t.type){case Q.h:return Object.assign({},e,t.payload);case Q.a:return Object.assign({},e,{active:!0});case Q.c:return Object.assign({},e,{active:!1});default:return e}},qe=Object(s.c)({globalSettings:He,proxy:Ue,session:ze,sdk:Fe}),$e=n("./src/chat/actions/sidebar.ts");const Qe=n("./src/chat/constants/sidebar.ts").a.SubredditChannels;var Je=(e=Qe,t)=>{switch(t.type){case $e.b:return t.payload.activeIndex;default:return e}};const We={};var Ye=(e=We,t)=>{switch(t.type){case $e.a:{var n=t.payload;const s=n.channelId,c=n.tabIndex;return Object.assign({},e,{[c]:s})}default:return e}},Ze=Object(s.c)({activeIndex:Je,lastChannelIdPerTab:Ye}),Xe=n("./node_modules/lodash/isEmpty.js"),et=n.n(Xe),tt=n("./node_modules/lodash/keyBy.js"),nt=n.n(tt),st=n("./src/chat/models/Channel/subreddit.ts");const ct={};var at=(e=ct,t)=>{switch(t.type){case v.d:return Object.assign({},e,t.payload);case a.b:case a.a:{const n=t.payload.channels,s=Object(u.c)(n,[d.a.Subreddit]);if(et()(s))return e;const c=me()(s).map(e=>{const t=e&&Object(st.d)(e.data);if(t&&t.subreddit)return t.subreddit});return Object.assign({},e,nt()(c,"id"))}default:return e}},rt=Object(s.c)({models:at}),ot=n("./src/chat/reducers/subscribe.ts"),it=n("./src/chat/actions/theme.ts"),dt=n("./src/chat/constants/theme.ts"),ut=n("./src/chat/models/Theme/index.ts");const lt={current:ut.a[dt.a],cached:{}};var bt=(e=lt,t)=>{switch(t.type){case it.THEME_CHANGED:return e.current=ut.a[t.payload.themeKey],Object.assign({},e);default:return e}},ht=n("./src/chat/actions/toast.ts");var ft=(e=null,t)=>{switch(t.type){case ht.a:return null;case ht.b:return t.payload.toast;default:return e}},mt=n("./src/chat/actions/typingIndicator.ts");const Ot={usernames:[]};var jt=(e=Ot,t)=>{switch(t.type){case mt.a:{const n=t.payload.usernames;return function(e,t){return e===t||(0===e.length&&0===t.length||!(0===e.length&&t.length>0)&&(!(e.length>0&&0===t.length)&&(1===e.length&&1===t.length?e[0]===t[0]:2===e.length&&2===t.length?e[0]===t[0]&&e[1]===t[1]:3===e.length&&3===t.length?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]:we()(e,t))))}(n,e.usernames)?e:{usernames:n}}case a.p:return{usernames:[]};default:return e}},pt=n("./src/chat/actions/promo/index.ts"),gt=n("./src/lib/reducers/addAuthentication/index.ts");var yt=Object(gt.a)((e,t)=>{switch(void 0===e&&(e=null),t.type){case V.a:return t.payload;case pt.b:return Object.assign({},e,{seenSubredditChatFtux:!0});default:return e}},null);const _t={userSubredditChatEnabled:!1};var Et=(e=_t,t)=>{switch(t.type){case Q.f:case Le.a:{const n=(t.payload||_t).userSubredditChatEnabled;return Object.assign({},e,t.payload,{userSubredditChatEnabled:e.userSubredditChatEnabled||n})}}return e};const Ct={};var vt=(e=Ct,t)=>{switch(t.type){case V.d:return t.payload;default:return e}};const It=le.A;var St=Object(gt.a)((e=It,t)=>(t.type,e),It);const wt={blob:"",loid:"",loidCreated:"",version:-1};var xt=(e=wt,t)=>{switch(t.type){case V.e:return t.payload;default:return e}};const Nt={globalTheme:dt.a};var kt=(e=Nt,t)=>{switch(t.type){case it.THEME_CHANGED:{const n=t.payload.themeKey;return Object.assign({},e,{globalTheme:n})}default:return e}};var Dt=(e="",t)=>{switch(t.type){case V.f:return t.payload;default:return e}},Tt=n("./src/chat/actions/session.ts");var At=(e=null,t)=>{switch(t.type){case Tt.a:case Tt.c:return t.payload;case Tt.b:return null;default:return e}};var Mt=(e="",t)=>{switch(t.type){case V.g:return t.payload;default:return e}},Lt=Object(s.c)({account:yt,chatExperiments:Et,experiments:vt,language:St,loid:xt,prefs:kt,reddaid:Dt,session:At,sessionTracker:Mt});t.a=Object(s.c)({channels:F,contacts:ae,container:de,members:ye,messages:De,meta:Te.b,platform:Ae.b,promos:Me.b,themes:bt,sendbird:qe,sidebarTabs:Ze,emojis:he,subreddits:rt,toast:ft,tooltipId:c.a,typingIndicator:jt,user:Lt,actionListener:ot.a})},"./src/chat/reducers/meta/index.ts":function(e,t,n){"use strict";var s=n("./src/lib/makeActionCreator/index.ts");Object(s.a)("META__META_RECEIVED");n.d(t,"a",function(){return c});const c={country:"",domain:"",isBot:!1,isRedesign:!1,isSessionSeo:!1,method:"",protocol:"",sessionReferrerDomain:"",userAgent:""};t.b=((e=c,t)=>{switch(t.type){case"META__META_RECEIVED":return t.payload;default:return e}})},"./src/chat/reducers/platform/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n("./node_modules/history/index.js"),c=n("./src/chat/actions/platform.ts"),a=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&(n[s[c]]=e[s[c]])}return n};const r={currentPage:null,referrers:{},metas:{}};t.b=((e=r,t)=>{switch(t.type){case c.a:{if(!t.payload)return e;const n=e.currentPage,c=t.payload,r=c.routeMatch,o=c.location,i=o.key,d=Object(s.createPath)(o),u=r?((e,t,n,s)=>{const c=n.route,r=(c.action,a(c,["action"]));return{key:e,locationState:s.state,meta:n.route.meta,queryParams:n.match.queryParams,routeMatch:Object.assign({},n,{route:r}),status:200,url:t,urlParams:n.match.params}})(i,d,r,o):((e,t)=>({key:e,locationState:{},queryParams:{},routeMatch:null,status:404,url:t,urlParams:{}}))(i,d);let l=e.referrers;if("PUSH"===c.action){const e=n&&n.url||"";l=Object.assign({},l,{[i]:e})}return Object.assign({},e,{referrers:l,currentPage:u})}case c.c:{if(!t.payload)return e;var n=t.payload;const s=n.key,c=n.title,a=n.description,r=n.icon,o=n.type;return Object.assign({},e,{metas:Object.assign({},e.metas,{[s]:{description:a,icon:r,title:c,type:o}})})}case c.b:return t.payload,e;default:return e}})},"./src/chat/reducers/promos/index.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var s=n("./src/chat/actions/promo/constants.ts");const c={displayNSFWWarning:!1,displaySubredditChatFtux:!1};t.b=((e=c,t)=>{switch(t.type){case s.a:{const n=t.payload;return Object.assign({},e,{[n]:!0})}case s.b:{const n=t.payload;return Object.assign({},e,{[n]:!1})}default:return e}})},"./src/chat/routes/chat.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var s,c=n("./src/lib/constants/index.ts"),a=n("./src/chat/actions/page.ts");!function(e){e.Message="message",e.User="user"}(s||(s={}));const r={action:a.b,chunk:c.r.CHAT,exact:!0,meta:{name:c.Qb.CHAT},path:"/chat/"},o={action:a.b,chunk:c.r.CHAT_EMPTY,exact:!0,meta:{name:c.Qb.CHAT_EMPTY},path:"/chat/empty/"},i={action:a.c,chunk:c.r.CHAT_MINIMIZE,exact:!0,meta:{name:c.Qb.CHAT_MINIMIZE},path:"/chat/minimize/"},d=["/chat/","/chat/channel/:action(create)/","/chat/channel/:channelId/:action(block|decline|delete|invite|invited|kick|members|leave|nsfw|report)?/:attr(message|user)?/:attrId?","/chat/r/:subredditName/channel/:channelId/:action(ban|block|decline|delete|deny|invite|invited|join|kick|leave|lock_confirmation|members|private|report)?/:attr(message|user)?/:attrId?"].map(e=>({action:a.a,chunk:c.r.CHAT,exact:!0,meta:{name:c.Qb.CHAT},path:e})),u=["/chat/user_id/:userIds/"].map(e=>({action:a.d,chunk:c.r.CHAT,exact:!0,meta:{name:c.Qb.CHAT},path:e}));t.b=[r,o,i,...d,...u]},"./src/chat/routes/index.ts":function(e,t,n){"use strict";var s=n("./src/lib/constants/index.ts");var c={action:n("./src/chat/actions/page.ts").b,chunk:s.r.CHAT,exact:!0,meta:{name:s.Qb.CHAT},path:"/chat/*"};const a=[...n("./src/chat/routes/chat.ts").b,c];t.a=a},"./src/chat/selectors/app.ts":function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return b});var s=n("./node_modules/lodash/isEmpty.js"),c=n.n(s),a=n("./src/chat/constants/container.ts"),r=n("./src/chat/strings/index.ts");const o=e=>e.container.size===a.a.HIDDEN,i=e=>e.container.size===a.a.EMBED||e.container.size===a.a.FULL,d=e=>!(!(e.user.account&&e.sendbird.session.active&&e.sendbird.sdk.initialized&&e.channels.firstLoaded)||l(e)),u=e=>window.parent!==window||!!(e&&e.meta&&e.meta.isRedesign),l=e=>{if(!e.user.account)return Object(r.a)("en","app.error.signIn")},b=e=>!c()(e.user.experiments)},"./src/chat/selectors/channels/next.tsx":function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return u}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return O}),n.d(t,"b",function(){return j});var s=n("./src/chat/constants/channels.ts"),c=n("./src/chat/constants/sidebar.ts"),a=n("./src/chat/selectors/channels.ts"),r=n("./src/chat/selectors/experiments.ts"),o=n("./src/chat/selectors/subreddit.ts");const i=e=>{const t=e.channels.subreddit.invited.sortedKeys[0],n=Object(o.b)(e,t);return{channelId:t,subredditName:n&&n.name,channelAction:s.a.VIEW_INVITE}},d=e=>{const t=e.channels.subreddit.joined.sortedKeys,n=Object.keys(t),s=!n.length?void 0:n[0];return{channelId:s&&t[s][0],subredditName:s}},u=e=>{const t=e.channels.subreddit.recommended.sortedKeys[0],n=Object(o.b)(e,t);return{channelId:t,subredditName:n&&n.name,channelAction:s.a.VIEW_JOIN}},l=e=>[i(e),d(e),u(e)],b=e=>{return{channelId:e.channels.invited.sortedKeys[0],channelAction:s.a.VIEW_INVITE}},h=e=>{return{channelId:e.channels.joined.sortedKeys[0]}},f=e=>[b(e),h(e)],m=e=>e.find(e=>!!e.channelId),O=(e,t)=>{const n=t===c.a.SubredditChannels?l(e):f(e),s=m(n);return s&&s.channelId},j=(e,t)=>{const n=Object(r.b)(e),s=[...t?[(e=>{const t=Object(a.k)(e);return{channelId:t&&t.channelId}})(e)]:[],...n?l(e):[],...f(e)];return m(s)}},"./src/chat/selectors/contacts.ts":function(e,t,n){"use strict";n.d(t,"i",function(){return r}),n.d(t,"j",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return l}),n.d(t,"e",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return m}),n.d(t,"f",function(){return O}),n.d(t,"g",function(){return j}),n.d(t,"d",function(){return p});var s=n("./node_modules/lodash/values.js"),c=n.n(s),a=n("./src/chat/selectors/members.ts");const r=e=>e.contacts.suggestedKeys.map(t=>e.contacts.models[t]),o=e=>{var t=e.contacts;const n=t.knownContacts,s=t.models;return Object.keys(n).map(e=>n[e]).filter(e=>e&&e.loaded&&e.valid).map(e=>e.userId&&s[e.userId]).filter(e=>!!e)},i=(e,t)=>{return c()(e.contacts.models).find(e=>e.id===t)},d=(e,t)=>{return c()(e.contacts.models).find(e=>e.name.toLowerCase()===t.toLowerCase())},u=(e,t)=>e.contacts.knownContacts[t.toLowerCase()],l=(e,t)=>{const n=u(e,t);return n&&n.method},b=(e,t)=>{if(t&&t.inviter)return e.contacts.models[t.inviter.id]},h=e=>e.contacts.knownContacts,f=e=>e.contacts.selectedUserIds,m=e=>f(e).length,O=e=>{const t=e.contacts.selectedUserIds;return t.length&&t.map(t=>{const n=i(e,t);return n&&n.id})},j=(e,t)=>{const n=d(e,t);if(n)return{name:t,id:n.id};const s=u(e,t);if(s&&s.userId)return{name:t,id:s.userId};const c=Object(a.b)(e,t);return c?{name:t,id:c.id}:void 0},p=e=>e.contacts.models},"./src/chat/selectors/experiments.ts":function(e,t,n){"use strict";var s;!function(e){e.SubredditChat="chat_subreddit",e.SubredditChatNotifcationFtux="chat_subreddit_notification_ftux"}(s||(s={})),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return a});const c=e=>!!e.user.experiments[s.SubredditChat]||!!e.user.chatExperiments.userSubredditChatEnabled,a=e=>!!e.user.experiments[s.SubredditChatNotifcationFtux]},"./src/chat/selectors/members.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return i});var s=n("./src/chat/selectors/channels.ts");const c=e=>{const t=Object(s.y)(e);return t&&e.members[t]},a=e=>{const t=c(e);if(t)return t.fetchingMembers},r=e=>{const t=c(e);if(t)return t.hasMoreMembers},o=e=>{const t=c(e);if(t)return t.model},i=(e,t)=>{const n=c(e);return n&&n.model&&n.model.find(e=>e.name===t)}},"./src/chat/selectors/platform.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"b",function(){return d}),n.d(t,"g",function(){return u});var s=n("./src/chat/constants/sidebar.ts");const c=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.channelId,a=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.action,r=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.urlParams.subredditName||void 0,o=e=>e.platform&&e.platform.currentPage&&e.platform.currentPage.meta&&e.platform.currentPage.meta.name,i=e=>{return!!r(e)?s.a.SubredditChannels:s.a.DirectChannels},d=e=>e.platform.currentPage&&e.platform.currentPage.queryParams,u=e=>!(!c(e)||a(e))},"./src/chat/selectors/sendbird.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return o});const s=e=>e.sendbird.sdk.connectionStatus,c=e=>e.sendbird.sdk.initialized,a=e=>e.sendbird.proxy.host,r=e=>e.sendbird.session,o=e=>e.sendbird.session.active},"./src/chat/selectors/sidebar.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return a});var s=n("./src/chat/constants/sidebar.ts");const c=e=>e.sidebarTabs.activeIndex===s.a.SubredditChannels,a=e=>e.sidebarTabs.activeIndex},"./src/chat/selectors/subreddit.ts":function(e,t,n){"use strict";n.d(t,"d",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return b});var s=n("./node_modules/lodash/isEmpty.js"),c=n.n(s),a=n("./node_modules/lodash/map.js"),r=n.n(a),o=n("./src/chat/models/Channel/index.ts"),i=n("./src/chat/selectors/channels.ts");const d=e=>e.subreddits&&e.subreddits.models,u=(e,t)=>{const n=d(e);return n&&n[t]},l=(e,t)=>{const n=t?Object(i.h)(e,t):Object(i.x)(e);if(n&&n.type===o.a.Subreddit){const t=n.customData;return u(e,t.subredditId)}},b=e=>{const t=e.subreddits.models,n=e.channels.models,s=e.channels.subreddit.joined.sortedKeys;if(!c()(s))return r()(s,e=>{const s=e[0],c=n[s].customData.subredditId;return{name:t[c].name,keyColor:t[c].keyColor,iconImg:t[c].iconImg,sortedChannels:(e=>r()(e,e=>n[e]))(e)}})}},"./src/chat/selectors/telemetry.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return b});var s=n("./node_modules/js-cookie/src/js.cookie.js"),c=n.n(s),a=n("./node_modules/url/url.js"),r=n.n(a),o=n("./src/chat/selectors/app.ts");const i=e=>({pageType:Object(o.d)(e)?"chat":"chat_fullscreen"}),d=e=>{const t=c.a.get("session_tracker");return{id:t?t.split(".")[0]:""}},u=e=>({id:e.user.account?e.user.account.id:"accessed_chat_without_login",isLoggedIn:!!e.user.account}),l=e=>{const t=e.platform.currentPage?e.platform.referrers[e.platform.currentPage.key]:void 0;if(t){return{domain:r.a.parse(t).hostname,url:t}}},b=e=>({})},"./src/chat/singleton/SendbirdSDK.ts":function(e,t,n){"use strict";var s=n("./src/config.ts"),c=n("./node_modules/sendbird/SendBird.min.js"),a=n.n(c),r=n("./src/lib/constants/index.ts"),o=n("./src/chat/actions/channel.ts"),i=n("./node_modules/react-router-redux/es/index.js"),d=n("./src/chat/constants/channels.ts"),u=n("./src/chat/helpers/urls/index.ts"),l=n("./src/chat/selectors/channels.ts"),b=n("./src/chat/selectors/subreddit.ts");const h=e=>async(t,n)=>{const s=n(),c=Object(l.x)(s),a=Object(b.b)(s,e),r=a&&a.name.toLowerCase();r&&(t(Object(o.M)({channelId:e,subredditName:r})),c&&c.channelId===e&&t(Object(i.b)(Object(u.channelAction)(e,d.a.DENY,r))))};var f=n("./src/chat/actions/channel/subreddit.ts"),m=n("./src/chat/actions/message/index.ts"),O=n("./src/chat/actions/sendbird/index.ts"),j=n("./src/chat/actions/sendbird/sdk.ts"),p=n("./src/chat/actions/toast.ts"),g=n("./src/chat/actions/typingIndicator.ts"),y=n("./src/chat/constants/batchSizes.ts"),_=n("./src/chat/constants/messages.ts"),E=n("./src/chat/constants/sendbird.ts"),C=n("./src/chat/constants/toast.ts"),v=n("./src/chat/models/Channel/index.ts"),I=n("./src/chat/models/Channel/platform.ts"),S=n("./src/chat/models/Channel/subreddit.ts"),w=n("./src/chat/models/Channel/utils/index.ts"),x=n("./src/chat/models/Channel/utils/removeSendbirdPrefix.ts"),N=n("./src/chat/models/Message/index.ts"),k=n("./src/chat/models/User/member.ts"),D=n("./node_modules/timers-browserify/main.js");n.d(t,"a",function(){return A}),n.d(t,"c",function(){return M});const T=s.a.sendbirdAppId;var A;!function(e){e.VIEW_PRIVATE="view_private",e.KICKED="kicked",e.BANNED="banned"}(A||(A={}));const M=new class{constructor(){this.channels={},this.channelUniqueHandlerID=[],this.connectionUniqueHandlerID=[],this.switchChannel=((e,t)=>{if(this.channel=e,t)return new Promise(e=>e([]));{this.operatorListQuery=this.channel.createOperatorListQuery(),this.subredditChannelMembersQuery=this.channel.createMemberListQuery(),this.memberListQuery=this.channel.createMemberListQuery(),this.createPreviousMessageListQuery();const e=this.getPreviousMessages(_.c.USER);return Promise.all([e])}}),(this.self=new a.a({appId:T})).Options.typingIndicatorThrottle=1e4}connect(e,t,n,s,c){return new Promise(s=>{this.dispatch=c,this.self.connect(n,t,`https://${e}`,`wss://${e}`,(e,t)=>{this.toggleUpdateListeners(!0),s({data:e,error:t})})})}isConnected(){return!!this.self.currentUser}disconnect(){return new Promise(e=>{this.isConnected()&&(this.toggleUpdateListeners(!1),this.self.disconnect(()=>e()))})}toggleUpdateListeners(e){e?(this.onChannelChanged(),this.onChannelDeleted(),this.onChannelMuted(),this.onChannelUnmuted(),this.onChannelLocked(),this.onChannelUnlocked(),this.onReceiveInvite(),this.onReceiveMessage(),this.onUpdateMessage(),this.onDeleteMessage(),this.onUserActions(),this.onUserKicked(),this.onTypingStatusUpdated(),this.onReconnectStarted(),this.onReconnectSucceeded(),this.onReconnectFailed()):(this.channelUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(e=>{this.self.removeChannelHandler(e)}),this.connectionUniqueHandlerID.length&&this.channelUniqueHandlerID.forEach(e=>{this.self.removeConnectionHandler(e)}))}reconnect(){this.dispatch(Object(p.e)({toast:C.a.ConnectionPending})),this.dispatch(Object(O.m)())}onReconnectStarted(){const e=new this.self.ConnectionHandler,t={connectionStatus:E.b.Pending},n={toast:C.a.ConnectionPending};e.onReconnectStarted=(()=>{this.dispatch(Object(j.h)(t)),this.dispatch(Object(p.e)(n))}),this.self.addConnectionHandler("CONNECTION_CHANGE",e),this.connectionUniqueHandlerID.push("CONNECTION_CHANGE")}onReconnectSucceeded(){const e=new this.self.ConnectionHandler,t={connectionStatus:E.b.Open};e.onReconnectSucceeded=(()=>{this.dispatch(Object(j.h)(t)),this.dispatch(Object(p.e)({toast:C.a.ConnectionOpen})),Object(D.setTimeout)(()=>this.dispatch(Object(p.d)()),3*r.Vb),this.dispatch(Object(m.q)(!0)),this.dispatch(Object(o.F)())}),this.self.addConnectionHandler("RECONNECT_SUCCEEDED",e),this.connectionUniqueHandlerID.push("RECONNECT_SUCCEEDED")}onReconnectFailed(){const e=new this.self.ConnectionHandler,t={connectionStatus:E.b.Closed};e.onReconnectFailed=(()=>{this.dispatch(Object(j.h)(t)),this.dispatch(Object(p.e)({toast:C.a.ConnectionClosed}))}),this.self.addConnectionHandler("RECONNECT_FAILED",e),this.connectionUniqueHandlerID.push("RECONNECT_FAILED")}onReceiveInvite(){const e=new this.self.ChannelHandler;e.onUserReceivedInvitation=(e=>{const t=Object(v.f)(e,e.memberState);this.dispatch(Object(o.S)(t))}),this.self.addChannelHandler("RECEIVE_CHANNEL_INVITE",e),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_INVITE")}onReceiveMessage(){const e=new this.self.ChannelHandler;e.onMessageReceived=((e,t)=>{const n=e.myMemberState,s=Object(v.f)(e,n);this.dispatch(Object(o.R)(s));const c=Object(N.b)(t);c&&this.dispatch(Object(m.r)(c))}),this.self.addChannelHandler("RECEIVE_CHANNEL_MESSAGE",e),this.channelUniqueHandlerID.push("RECEIVE_CHANNEL_MESSAGE")}onUpdateMessage(){const e=new this.self.ChannelHandler;e.onMessageUpdated=((e,t)=>{const n=e.myMemberState,s=Object(v.f)(e,n);this.dispatch(Object(o.R)(s));const c=Object(N.b)(t);c&&this.dispatch(Object(m.r)(c))}),this.self.addChannelHandler("UPDATE_CHANNEL_MESSAGE",e),this.channelUniqueHandlerID.push("UPDATE_CHANNEL_MESSAGE")}onDeleteMessage(){const e=new this.self.ChannelHandler;e.onMessageDeleted=((e,t)=>{this.dispatch(Object(m.t)(t))}),this.self.addChannelHandler("DELETE_CHANNEL_MESSAGE",e),this.channelUniqueHandlerID.push("DELETE_CHANNEL_MESSAGE")}onTypingStatusUpdated(){const e=new this.self.ChannelHandler;e.onTypingStatusUpdated=(e=>{const t=Object(x.a)(e.url),n=e.getTypingMembers().map(e=>e.nickname);this.dispatch(Object(g.b)({channelId:t,usernames:n}))}),this.self.addChannelHandler("TYPING_STATUS_UPDATED",e),this.channelUniqueHandlerID.push("TYPING_STATUS_UPDATED")}onUserActions(){let e;!function(e){e.onUserLeft="USER_LEFT_CHANNEL",e.onUserBanned="USER_BANNED_CHANNEL"}(e||(e={})),Object.keys(e).map(t=>{const n=new this.self.ChannelHandler,s=e[t];n[t]=((e,t)=>{const n=Object(v.f)(e,e.memberState);this.dispatch(Object(o.S)(n,!0))}),this.self.addChannelHandler(s,n),this.channelUniqueHandlerID.push(s)})}onChannelChanged(){const e=new this.self.ChannelHandler;e.onChannelChanged=(e=>{const t=e.myMemberState,n=Object(v.f)(e,t);this.dispatch(Object(o.S)(n))}),this.self.addChannelHandler("ON_CHANNEL_CHANGED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_CHANGED")}onChannelDeleted(){const e=new this.self.ChannelHandler;e.onChannelDeleted=(e=>{const t=Object(x.a)(e);this.dispatch(h(t))}),this.self.addChannelHandler("ON_CHANNEL_DELETED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_DELETED")}onChannelMuted(){const e=new this.self.ChannelHandler;e.onUserMuted=(e=>{const t=Object(v.f)(e);this.dispatch(Object(o.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_MUTED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_MUTED")}onChannelUnmuted(){const e=new this.self.ChannelHandler;e.onUserUnmuted=(e=>{const t=Object(v.f)(e);this.dispatch(Object(o.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_UNMUTED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_UNMUTED")}onChannelLocked(){const e=new this.self.ChannelHandler;e.onChannelFrozen=(e=>{const t=Object(v.f)(e,e.myMemberState);this.dispatch(Object(o.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_LOCKED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_LOCKED")}onChannelUnlocked(){const e=new this.self.ChannelHandler;e.onChannelUnfrozen=(e=>{const t=Object(v.f)(e,e.myMemberState);this.dispatch(Object(o.S)(t))}),this.self.addChannelHandler("ON_CHANNEL_UNLOCKED",e),this.channelUniqueHandlerID.push("ON_CHANNEL_UNLOCKED")}mapCodeToError(e){switch(e){case 400750:return A.KICKED;case 400751:return A.BANNED;default:return A.VIEW_PRIVATE}}autoJoinSubredditChannel(e,t){return new Promise((e,n)=>{const s=t.channelSendbirdUrl,c=t.customData;c&&c.subredditId?this.dispatch(Object(f.u)(s,c.subredditId)).then(t=>{t.error?n({error:this.mapCodeToError(t.error.code)}):e(t.body)}).catch(e=>{n({error:this.mapCodeToError(e.code)})}):e()})}convertPartialToSubredditChannel(e,t){const n=d.b.PARTIAL,s=d.b.INVITED;t===n&&(e.channelState=s,this.dispatch(Object(o.T)({channel:e})))}getChannelByChannelId(e){return new Promise((t,n)=>{const s=Object(w.a)(e);this.self.GroupChannel.getChannel(s,(e,s)=>{s?n(s):t(e)})})}addChannelModelByChannelId(e){return new Promise((t,n)=>{this.getChannelByChannelId(e).then(e=>{if(!e)return t();const n=Object(v.f)(e);if(!n)return t();if(n.type===v.a.Subreddit){const e=n.customData.subreddit;e&&this.dispatch(Object(f.o)({[e.id]:e}))}this.dispatch(Object(o.T)({channel:n})),t(n)}).catch(e=>{t()})})}enterChannel(e,t,n){return new Promise(s=>{const c=(e={})=>({data:e});if(!this.isConnected())return s(c());const a=e.channelId,r=this.channels[a];if(r&&!t)return this.switchChannel(r,n).then(([e])=>s(c({messageListData:e}))).catch(()=>s(c()));this.getChannelByChannelId(a).then(r=>{if(!r)return s(c());this.channels[a]=r;const i=Object(v.f)(r);if(this.convertPartialToSubredditChannel(i,e.channelState),t&&i.type===v.a.Subreddit)return this.autoJoinSubredditChannel(r,i).then(e=>{const t=Object(I.a)(e,d.b.JOINED);this.dispatch(Object(o.T)({channel:t})),this.switchChannel(r).then(([e])=>s(c({messageListData:e}))).catch(()=>s(c()))}).catch(e=>s(c(e.error)));this.switchChannel(r,n).then(([e])=>s(c({messageListData:e}))).catch(()=>s(c()))}).catch(()=>s(c()))})}updateChannel({name:e,coverUrl:t,data:n}){return new Promise((s,c)=>{this.channel?this.channel.updateChannel(e,t,n,(e,t)=>e?s():c(t)):c("No channel selected")})}hideChannel(){return new Promise(e=>{if(this.channel)return this.channel.hide(),e();e()})}leaveChannel(){return new Promise((e,t)=>{if(this.channel)return this.channel.leave((e,n)=>{n&&t(n)}),e();t("No channel selected")})}acceptChannelInvite(){return new Promise(e=>{if(this.channel)return this.channel.acceptInvitation(),e();e()})}declineChannelInvite(){return new Promise((e,t)=>{this.channel?this.channel.declineInvitation((n,s)=>{s?t(s):e(n)}):e()})}lockChannel(){return new Promise((e,t)=>(this.channel&&this.channel.freeze((e,n)=>{n&&t(n)}),e()))}unlockChannel(){return new Promise((e,t)=>(this.channel&&this.channel.unfreeze((e,n)=>{n&&t(n)}),e()))}onUserKicked(){const e=new this.self.ChannelHandler;e.onUserBanned=((e,t)=>{const n=Object(S.b)(e,e.memberState);n&&this.dispatch(Object(f.s)(n,t.userId))}),this.self.addChannelHandler("CHANNEL_USER_KICKED",e),this.channelUniqueHandlerID.push("CHANNEL_USER_KICKED")}kickUserFromChannel(e,t,n){return new Promise((s,c)=>this.channel?(this.channel.banUserWithUserId(e,t,n,(e,t)=>e?s():c(t)),s()):s())}getExistingChannels(e,t){return new Promise((n,s)=>{let c;e===d.b.INVITED&&t===d.f.NonSuper?this.channelListQueryInvited?c=this.channelListQueryInvited:(this.channelListQueryInvited=this.self.GroupChannel.createMyGroupChannelListQuery(),c=this.channelListQueryInvited):e===d.b.JOINED&&t===d.f.NonSuper?this.channelListQueryJoined?c=this.channelListQueryJoined:(this.channelListQueryJoined=this.self.GroupChannel.createMyGroupChannelListQuery(),c=this.channelListQueryJoined):e===d.b.JOINED&&t===d.f.Super?this.channelListQueryJoinedSubreddit?c=this.channelListQueryJoinedSubreddit:(this.channelListQueryJoinedSubreddit=this.self.GroupChannel.createMyGroupChannelListQuery(),c=this.channelListQueryJoinedSubreddit):e===d.b.INVITED&&t===d.f.Super&&(this.channelListQueryInvitedSubreddit?c=this.channelListQueryInvitedSubreddit:(this.channelListQueryInvitedSubreddit=this.self.GroupChannel.createMyGroupChannelListQuery(),c=this.channelListQueryInvitedSubreddit)),c.includeEmpty=!0,c.limit=y.a.Channels,c.memberStateFilter=this.self.GroupChannel.memberState[e],c.superChannelFilter=t,c.hasNext?c.next((e,t)=>{if(t)s(t);else{const t=c.hasNext;n({channels:e,hasMoreChannels:t})}}):n()})}getSubredditChannelMembers(){return new Promise((e,t)=>{this.subredditChannelMembersQuery.hasNext&&this.subredditChannelMembersQuery.next((n,s)=>{if(s)t(s);else{const t=this.subredditChannelMembersQuery.hasNext;e({members:n,hasMoreMembers:t})}})})}getChannelMembersStartsWith(e){return new Promise((t,n)=>{this.memberListQuery=this.channel.createMemberListQuery(),this.memberListQuery?(this.memberListQuery.nicknameStartsWithFilter=e,this.memberListQuery.next((e,s)=>{if(s)n(s);else{const n=this.memberListQuery&&this.memberListQuery.hasNext||!1;t({members:e,hasMoreMembers:n})}})):n(Error("this.memberListQuery is null or undefined"))})}searchMemberByName(e,t=!1){return new Promise((n,s)=>{this.memberListQuery=this.channel.createMemberListQuery(),this.memberListQuery?(this.memberListQuery.nicknameStartsWithFilter=e,this.memberListQuery.next((s,c)=>{const a=Object(k.a)(s),r=a.filter(n=>t&&n&&n.name===e||!t&&n);a.length&&this.dispatch(Object(O.i)(a)),n(r)})):s(Error("this.memberListQuery is null or undefined"))})}startTypingIndicator(){this.channel&&this.channel.startTyping()}endTypingIndicator(){this.channel&&this.channel.endTyping()}getPreviousMessages(e,t){return new Promise((n,s)=>{if(this.channel){const c={};t&&this.createPreviousMessageListQuery(),this.messageListQuery.load(y.a.Messages,!0,e,(e,t)=>{if(t)s();else{e.forEach(e=>{c[e.messageId]=Object(N.b)(e)});const t=this.messageListQuery.hasMore;n({messages:c,hasMore:t})}})}else s()})}addMessage(e,t,n=[]){return new Promise((s,c)=>{if(this.channel){const a=new this.self.UserMessageParams;a.data=t,a.message=e,n&&n.length&&(a.mentionType=this.self.BaseMessageParams.MentionType.USERS,a.mentionedUserIds=n),this.channel.sendUserMessage(a,(e,t)=>{t?c():s(Object(N.b)(e))})}})}createPreviousMessageListQuery(){this.messageListQuery=this.channel.createPreviousMessageListQuery()}deleteMessage(e){return new Promise(t=>{this.channel&&this.channel.deleteMessage(e,(e,n)=>{n||t(e)})})}getFirstMessage(){return new Promise((e,t)=>{this.channel?this.channel.getNextMessagesByTimestamp(0,!0,1,!0,"","",(t,n)=>{n||e(t)}):t()})}getUnreadCount(){return new Promise((e,t)=>{const n=["super_group_channel_unread_message_count","super_group_channel_invitation_count","super_group_channel_unread_mention_count","non_super_group_channel_unread_message_count","non_super_group_channel_invitation_count"];this.self.GroupChannel.getUnreadItemCount(n,(n,s)=>{if(s)t(s);else{const t=(Number(n.super_group_channel_unread_message_count)||0)+(Number(n.super_group_channel_invitation_count)||0),s=Number(n.super_group_channel_unread_mention_count)||0,c=(Number(n.non_super_group_channel_unread_message_count)||0)+(Number(n.non_super_group_channel_invitation_count)||0);e({unread_count:c,subreddit_unread_count:t,subreddit_mention_count:s})}})})}markChannelAsRead(){return new Promise(e=>{this.channel&&this.channel.markAsRead(),e()})}setMyCountPreference(e){return new Promise(t=>{this.channel&&this.channel.setMyCountPreference(e),t()})}resetChannelMessageListQuery(){return new Promise(e=>{this.messageListQuery=this.channel.createPreviousMessageListQuery(),e()})}};t.b=M},"./src/chat/strings/index.ts":function(e,t,n){"use strict";var s=n("./node_modules/lodash/get.js"),c=n.n(s),a={app:{layout:{header:{title:{en:"Chats"},newChat:{en:"Start a new chat"},popout:{en:"Open chat in new window"},close:{en:"Close chat"},menu:{en:"Menu"},minimize:{en:"Minimize chat"}},contactList:{en:"Contact List"},currentConversation:{en:"Current Conversation"}},chat:{firstTimeUserExp:{label:{en:"New Feature"},title:{en:"Community Chat Rooms"},body:{en:"Some subreddits now have chat rooms. You’ve got early access - find\n          topics you’re interested in and join the conversation!"},button:{en:"Got it"}},actions:{new:{en:"New Chat"},invited:{en:"Let's go"}},list:{new:{en:"Wants to message you"},showMore:{en:"Show more"},collapse:{en:"Collapse"},prefix:{messageOwner:{en:"You:"},sentSnoomoji:{en:"Sent a Snoomoji"},sentPostLink:{en:"Shared a post"},sentTextLink:{en:"Shared a link"}}},ban:{header:{en:"Confirm Ban"},warning:{en:"Are you sure you want to ban <%= user %> from chat?"},userNameFallback:{en:"this user"},details:{en:"They won't be able to send messages in any chatrooms\n        or be invited to private chatrooms."},additionalDetails:{en:"You can also remove all messages they've\n        sent across all rooms or "},banFromSubreddit:{en:"ban from the subreddit."},banFromCommunity:{en:"Also ban from community"},removeAllMessages:{en:"Remove all messages"}},block:{warning:{en:"Are you sure you want to block this user?"},header:{en:"Block"},details:{en:"You will no longer see their comments, posts,\n          and messages. They will not know that you've blocked them.\n          You will no longer get notifications from this user."},apiError:"Something went wrong. Please try again later.",apiSuccess:"User has been successfully blocked."},channels:{addGroupMembers:{en:"You can add %0 more Redditors"},addToGroup:{en:"Add to group"},addToRoom:{en:"Add to room"},chats:{en:"Chats"},createGroup:{en:"Create Group"},groupName:{en:"Group name (required)"},groupMembers:{en:"group members"},maxGroupSize:{en:"Maximum group size reached"},loading:{en:"Loading channels..."},requests:{en:"Requests"},renameGroup:{en:"Rename group"},rooms:{en:"Please check back for rooms soon!"}},privateChannel:{title:{en:"is a private community"},description:{en:"The moderators in this\n          community have set it to private. You must be a\n          moderator or approved submitter to join this room."}},contactList:{to:{en:"To:"},invalidUser:{en:"User doesn't exist"},potentialsHeader:{en:"Click to add"},existingGroupContact:{en:"already in group"},existingRoomContact:{en:"already in room"},blockedContact:{en:"blocked"}},delete:{warning:{en:"Are you sure you want to delete this message?"},title:{en:"Delete message"},details:{en:"You can't undo this."}},inviteConfirmation:{basicTitle:{en:"Invite users to chat"},roomTitle:{en:"Invite users to room"},basicDetails:{en:"Invited users will have access to the\n          chat history of this conversation."},roomDetails:{en:"Invited users will have access to the chat room."}},nsfwWarning:{title:{en:"NSFW User"},details:{en:"One or more users in this chat are marked as NSFW\n          (not safe for work), which means they tend to post explicit content\n          elsewhere on Reddit. This doesn't necessarily mean that the content\n          of this chat is explicit."}},leave:{title:{en:"Are you sure"},groupSubHeader:{en:"Leave group chat?"},roomSubHeader:{en:"Leave Room?"},groupDetails:{en:"You will be removed from the group and no longer receive new messages.\n          You will not be able to join this group again unless you receive another invite."},roomDetails:{en:"You will be removed from the room and no longer receive new messages."}},lock:{title:{en:"Are you sure"},roomSubHeader:{en:"Lock Room?"},roomDetails:{en:"No one in this room will be able to send messages in while it is locked."},lockerText:{en:"This chat has been locked."}},message:{placeholder:{en:"Enter text here…"},failedToSend:{en:"Failed to send"},dropdown:{options:{addToGroup:{en:"Add to group"},addToRoom:{en:"Add to Room"},profile:{en:"View Profile"},block:{en:"Block"},members:{en:"View members"},leave:{en:"Leave group"},leaveRoom:{en:"Leave room"},lockRoom:{en:"Lock room"},unlockRoom:{en:"Unlock room"},renameGroup:{en:"Rename group"},copyLink:{en:"Copy link"},muteChannel:{en:"Disable notification badging"},unmuteChannel:{en:"Enable notification badging"}}},pickers:{snoomoji:{en:"Choose Snoomoji"},snoomojiLoading:{en:"Loading snoomoji..."},userlistLoading:{en:"Loading members..."},memberNotFound:{en:"Member not found!"}},timeStamp:{now:{en:"Now"},today:{en:"Today"},yesterday:{en:"Yesterday"}}},muted:{mutedText:{en:"You are temporarily muted in this room"}},messageList:{loading:{en:"Loading history..."},loadingError:{en:"Something went wrong. Please try again."},members:{en:"Members"}},request:{karma:{en:"karma"},header:{en:"Chat Request"},decline:{title:{en:"Decline invite?"},details:{en:"This chat will be deleted, and this person will not be notified\n            that you've declined their request."}},groupHeader:{en:"Group invite"},redditor:{en:"redditor for"},details:{en:"Accept their request if you'd like to continue the\n          conversation. We won't notify them if you decline."},blocked:{warning:{en:"Heads up: you previously blocked\n            at least one person in this group."},details:{en:"If you join, you'll be able to see any\n            messages they send. They'll remain blocked\n            on the rest of Reddit."},label:{en:"Blocked"}},nsfw:{en:"NSFW"},preview:{en:"Preview of this chat"},defaultTitle:{en:"group"}},emptyState:{info:{en:"All the direct chats that you're in will show up here"},startChatting:{en:"Start chatting"},title:{en:"Start a direct chat"},main:{en:"You can start a new direct chat with the button below or from someone's profile"}},beta:{title:{en:"You're invited. Try out Reddit Chat."},main:{en:"Start a real-time chat with another redditor.\n          We're beta testing this feature, so please share your feedback by chatting u/reddit_chat_feedback."}},members:{dropdown:{options:{ban:{en:"Ban"},block:{en:"Block"},kick:{en:"Kick"},report:{en:"Report"}}},loading:{en:"Loading members..."}},typingIndicator:{oneUser:{en:"<%= user %> is typing..."},twoUsers:{en:"<%= firstUser %> and <%= secondUser %> are typing..."},severalUsers:{en:"Several people are typing..."},directChannelUser:{en:"is typing..."}},report:{title:{en:"Reason for report"},reasons:{threats:{en:"Threatens, harrasses, or bullies"},violence:{en:"It threatens violence or physical harm"},personal:{en:"It’s personal and confidential information"},impersonation:{en:"Impersonation"},spam:{en:"This is spam"},minorSexualization:{en:"It’s sexual or suggestive content involving minors"},offensive:{en:"It’s rude, vulgar or offensive"},copyright:{en:"It infringes my copyright"},trademark:{en:"It infringes my trademark rights"},pornography:{en:"It’s involuntary pornography"},prohibited:{en:"It’s a transaction for prohibited goods or services"},harassment:{en:"It’s targeted harassment"}}},reportedMessage:{action:{report:{en:'Reported for "<%= reason %>"'},delete:{en:"Deleted by u/<%= username %>"},approve:{en:"Approved by u/<%= username %>"}},button:{delete:{en:"Delete Message"},ignore:{en:"Ignore Report"}}},kick:{title:{en:"Confirm Kick"},duration:{tenMinutes:{en:"10 minutes"},oneHour:{en:"1 hour"},oneDay:{en:"1 day"},threeDays:{en:"3 days"}},headerText:{en:"Are you sure you want to kick <%= user %> from this room?"},headerSubText:{en:"They'll be able to join again once the kick duration is over."},durationHeader:{en:"Kick Duration"}},intro:{en:"This is the start of a beautiful thing. Say something nice, or share a cat fact."},user:{snoovatar:{en:"Snoovatar"}},subredditChannel:{joinedRooms:{en:"Joined Rooms"},blankState:{en:"Community chatrooms that you join will show up here."},recommendedHeader:{title:{en:"Recommended Rooms"},subText:{en:"Also check out"}},inviteHeader:{en:"Invites"},members:{en:"Members"},joinHeader:{en:"Room Details"},joinDesc:{en:"Description"},nsfwHeader:{en:"NSFW community"},nsfwDesc:{en:"It may contain explicit or adult content."},nsfwWarning:{en:"Heads up: this community is labeled not safe for work. "},removedUserExperience:{default:{title:{en:"Removed"},header:{en:"You have been removed from this room."},description:{en:"You have been removed from this room."}},banned:{title:{en:"Banned"},header:{en:"You are banned from this room."},description:{en:"You are banned from this room and may not join until you are unbanned."}},kicked:{title:{en:"Kicked"},header:{en:"You are temporarily kicked from this room."},description:{en:"You are temporarily kicked from this room and may not join until you are no longer kicked."}}}},toast:{connectionClosed:{en:"Hmm, no internet?"},connectionPending:{en:"Looking for the internet..."},connectionOpen:{en:"Found the internet!"}}},button:{accept:{en:"Accept"},ban:{en:"Confirm Ban"},block:{en:"Block"},cancel:{en:"Cancel"},chat:{en:"Chat"},decline:{en:"Decline"},delete:{en:"Delete"},directs:{en:"Directs"},done:{en:"Done"},init:{en:"Start a chat"},joinRoom:{en:"Join Room"},kick:{en:"Kick"},leave:{en:"Leave"},lock:{en:"Lock"},resend:{en:"Resend"},rooms:{en:"Rooms"},submit:{en:"Submit"},save:{en:"Save"}},error:{genericPage:{en:"Sorry, something went wrong."},signIn:{en:"Sign in, please."}}}};function r(e,t){const n=[t,e].join(".");return c()(a,n,"")}n.d(t,"a",function(){return r})},"./src/chat/tracking/events/chatPreview.ts":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return d});var s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),a=n("./src/chat/tracking/fields/common.ts"),r=n("./src/chat/tracking/fields/subreddit.ts"),o=n("./src/chat/tracking/sendEvent.ts");const i=e=>{Object(o.a)(Object.assign({noun:"preview",source:s.b.ChatPreview,action:s.a.View,chat:Object.assign({},Object(c.g)(e),Object(c.A)(e),Object(c.p)(e),Object(c.s)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))},d=e=>{Object(o.a)(Object.assign({noun:"join",source:s.b.ChatPreview,action:s.a.Click,chat:Object.assign({},Object(c.g)(e),Object(c.A)(e),Object(c.p)(e),Object(c.s)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))}},"./src/chat/tracking/events/chatSettings.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return b}),n.d(t,"e",function(){return h});var s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),a=n("./src/chat/tracking/fields/common.ts"),r=n("./src/chat/tracking/fields/subreddit.ts"),o=n("./src/chat/tracking/sendEvent.ts");const i=e=>Object(o.a)(Object.assign({noun:"chat_settings",source:s.b.ChatSettings,action:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e))),d=(e,t)=>Object(o.a)(Object.assign({noun:"chat_member_block",source:s.b.ChatSettings,action:s.a.Submit,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.b)(t)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e))),u=e=>{Object(o.a)(Object.assign({noun:"view_member",source:s.b.ChatSettings,action:s.a.Click,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.u)(e),Object(c.g)(e))},Object(a.a)(e)))},l=(e,t)=>{Object(o.a)(Object.assign({noun:"chat_member_report",source:s.b.ChatSettings,action:s.a.Submit,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.w)(t)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))},b=e=>Object(o.a)(Object.assign({noun:"leave_group",source:s.b.ChatSettings,action:s.a.Click,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e))),h=(e,t,n)=>Object(o.a)(Object.assign({noun:t?"lock_room":"unlock_room",source:s.b.ChatSettings,action:n?s.a.Click:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))},"./src/chat/tracking/events/chatView.ts":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return u}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return b});var s=n("./src/telemetry/models/Event.ts"),c=n("./src/chat/tracking/fields/chat.ts"),a=n("./src/chat/tracking/fields/common.ts"),r=n("./src/chat/tracking/fields/subreddit.ts"),o=n("./src/chat/tracking/sendEvent.ts");const i=e=>Object(o.a)(Object.assign({noun:"chat",source:s.b.ChatView,action:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.s)(e),Object(c.l)(e),Object(c.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e))),d=(e,t)=>{Object(o.a)(Object.assign({noun:"chat_message",source:s.b.ChatView,action:s.a.Submit,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.s)(e,0),Object(c.n)(e,t),Object(c.x)(e,t),Object(c.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))},u=(e,t)=>{Object(o.a)(Object.assign({noun:"chat_message_failed",source:s.b.ChatView,action:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.s)(e,0),Object(c.t)(e,t),Object(c.x)(e),Object(c.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))},l=(e,t,n)=>{Object(o.a)(Object.assign({noun:"report_message",source:s.b.ChatView,action:s.a.Submit,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.s)(e,0),Object(c.m)(t),Object(c.n)(e,t),Object(c.v)(n),Object(c.x)(e,t),Object(c.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))},b=e=>{Object(o.a)(Object.assign({noun:"history",source:s.b.ChatView,action:s.a.View,chat:Object.assign({},Object(c.A)(e),Object(c.p)(e),Object(c.g)(e),Object(c.y)(e)),subreddit:Object.assign({},Object(r.a)(e),Object(r.b)(e))},Object(a.a)(e)))}},"./src/chat/tracking/events/contactsList.ts":function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"c",function(){return d}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return f});var s=n("./src/chat/tracking/sendEvent.ts"),c=n("./src/telemetry/models/Event.ts"),a=n("./src/chat/tracking/fields/chat.ts"),r=n("./src/chat/tracking/fields/common.ts"),o=n("./src/chat/tracking/fields/subreddit.ts");const i=e=>{Object(s.a)(Object.assign({noun:"contacts",source:c.b.ContactsList,action:c.a.View,chat:Object.assign({},Object(a.c)(e),Object(a.d)(e))},Object(r.a)(e)))},d=(e,t)=>{Object(s.a)(Object.assign({noun:"contact_add",source:c.b.ContactsList,action:c.a.Click,chat:Object.assign({},Object(a.e)(e),Object(a.a)(e,t),Object(a.c)(e),Object(a.g)(e),Object(a.f)(e),Object(a.B)(e,t))},Object(r.a)(e)))},u=e=>{Object(s.a)(Object.assign({noun:"alert_invalid_user",source:c.b.ContactsList,action:c.a.View,chat:Object.assign({},Object(a.A)(e),Object(a.c)(e),Object(a.d)(e),Object(a.g)(e),Object(a.B)(e,"search"),Object(a.f)(e))},Object(r.a)(e)))},l=(e,t)=>{Object(s.a)(Object.assign({noun:"alert_invalid_channel",source:c.b.ContactsList,action:c.a.View,chat:Object.assign({},Object(a.A)(e),Object(a.c)(e),Object(a.d)(e),Object(a.g)(e),Object(a.B)(e,t),Object(a.f)(e))},Object(r.a)(e)))},b=(e,t)=>{Object(s.a)(Object.assign({noun:"create_chat",source:c.b.ContactsList,action:c.a.Click,chat:Object.assign({},Object(a.A)(e,t),Object(a.c)(e),Object(a.d)(e),Object(a.g)(e,t),Object(a.f)(e))},Object(r.a)(e)))},h=e=>{Object(s.a)(Object.assign({noun:"close_contacts",source:c.b.ContactsList,action:c.a.Click,chat:Object.assign({},Object(a.e)(e),Object(a.c)(e),Object(a.d)(e),Object(a.g)(e),Object(a.f)(e))},Object(r.a)(e)))},f=e=>{Object(s.a)(Object.assign({noun:"add_to_chat",source:c.b.ContactsList,action:c.a.Click,chat:Object.assign({},Object(a.A)(e),Object(a.p)(e),Object(a.g)(e),Object(a.d)(e),Object(a.f)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e)))}},"./src/chat/tracking/events/invitationInbox.ts":function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"g",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return b}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return f});var s=n("./src/chat/tracking/sendEvent.ts"),c=n("./src/telemetry/models/Event.ts"),a=n("./src/chat/tracking/fields/chat.ts"),r=n("./src/chat/tracking/fields/common.ts"),o=n("./src/chat/tracking/fields/subreddit.ts");const i=e=>Object(s.a)(Object.assign({noun:"inbox",source:c.b.InvitationInbox,action:c.a.View,chat:Object.assign({},Object(a.j)(e,"room"),Object(a.q)(e))},Object(r.a)(e))),d=e=>Object(s.a)(Object.assign({noun:"invitation",source:c.b.InvitationInbox,action:c.a.View,chat:Object.assign({},Object(a.j)(e),Object(a.k)(e),Object(a.h)(e),Object(a.i)(e),Object(a.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),u=e=>Object(s.a)(Object.assign({noun:"invitation_accept",source:c.b.InvitationInbox,action:c.a.Click,chat:Object.assign({},Object(a.j)(e),Object(a.k)(e),Object(a.h)(e),Object(a.i)(e),Object(a.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),l=e=>Object(s.a)(Object.assign({noun:"invitation_decline",source:c.b.InvitationInbox,action:c.a.Click,chat:Object.assign({},Object(a.j)(e),Object(a.k)(e),Object(a.h)(e),Object(a.i)(e),Object(a.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),b=e=>Object(s.a)(Object.assign({noun:"invitation_view_member",source:c.b.InvitationInbox,action:c.a.Click,chat:Object.assign({},Object(a.j)(e),Object(a.k)(e),Object(a.h)(e),Object(a.i)(e),Object(a.p)(e)),subreddit:Object.assign({},Object(o.a)(e),Object(o.b)(e))},Object(r.a)(e))),h=e=>{Object(s.a)(Object.assign({noun:"expand",source:c.b.InvitationInbox,action:c.a.Click},Object(r.a)(e)))},f=e=>{Object(s.a)(Object.assign({noun:"collapse",source:c.b.InvitationInbox,action:c.a.Click},Object(r.a)(e)))}},"./src/chat/tracking/events/messagesInbox.ts":function(e,t,n){"use strict";var s=n("./src/chat/selectors/telemetry.ts"),c=n("./src/chat/selectors/promos.ts");const a=e=>{return{settingValue:Object(c.c)(e)?"ftue_none":"ftue_open"}};var r=n("./src/chat/tracking/fields/chat.ts"),o=n("./src/chat/tracking/fields/common.ts"),i=n("./src/chat/tracking/sendEvent.ts"),d=n("./src/telemetry/models/Event.ts");n.d(t,"e",function(){return u}),n.d(t,"f",function(){return l}),n.d(t,"b",function(){return b}),n.d(t,"a",function(){return h}),n.d(t,"g",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return O});const u=e=>{Object(i.a)(Object.assign({noun:"inbox",source:d.b.MessageInbox,action:d.a.View,chat:Object.assign({},Object(r.o)(e),Object(r.z)(e),Object(r.q)(e,!1))},Object(o.a)(e)))},l=e=>{Object(i.a)(Object.assign({noun:"rooms_inbox",source:d.b.MessageInbox,action:d.a.View,chat:Object.assign({},Object(r.r)(e),Object(r.q)(e,!0))},Object(o.a)(e)))},b=e=>{Object(i.a)(Object.assign({noun:"create_chat",source:d.b.MessageInbox,action:d.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.z)(e),Object(r.q)(e))},Object(o.a)(e)))},h=e=>{Object(i.a)(Object.assign({noun:"close_chat",source:d.b.MessageInbox,action:d.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e),{actionInfo:Object.assign({},a(e),Object(s.a)(e))}))},f=e=>{Object(i.a)(Object.assign({noun:"rooms_tooltip_523",source:d.b.MessageInbox,action:d.a.View,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e)))},m=e=>{Object(i.a)(Object.assign({noun:"dismiss_rooms_tooltip_523",source:d.b.MessageInbox,action:d.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e)))},O=e=>{Object(i.a)(Object.assign({noun:"minimize_chat",source:d.b.MessageInbox,action:d.a.Click,chat:Object.assign({},Object(r.o)(e),Object(r.q)(e))},Object(o.a)(e),{actionInfo:Object.assign({},a(e),Object(s.a)(e))}))}},"./src/chat/tracking/events/platform.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var s=n("./src/chat/tracking/sendEvent.ts"),c=n("./src/telemetry/models/Event.ts"),a=n("./src/chat/tracking/fields/chat.ts"),r=n("./src/chat/tracking/fields/common.ts");const o=(e,t,n,o)=>{Object(s.a)(Object.assign({noun:t||"chat",source:n||c.b.Nav,action:o||c.a.Click,chat:Object.assign({},Object(a.g)(e),Object(a.u)(e),Object(a.p)(e),Object(a.z)(e),Object(a.A)(e))},Object(r.a)(e)))},i=e=>{Object(s.a)(Object.assign({source:c.b.Nav,action:c.a.View,noun:"orangered_06"},Object(r.a)(e)))}},"./src/chat/tracking/fields/chat.ts":function(e,t,n){"use strict";n.d(t,"g",function(){return h}),n.d(t,"A",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"c",function(){return O}),n.d(t,"E",function(){return j}),n.d(t,"D",function(){return p}),n.d(t,"p",function(){return g}),n.d(t,"x",function(){return y}),n.d(t,"k",function(){return _}),n.d(t,"C",function(){return E}),n.d(t,"z",function(){return C}),n.d(t,"s",function(){return v}),n.d(t,"o",function(){return I}),n.d(t,"r",function(){return S}),n.d(t,"q",function(){return w}),n.d(t,"n",function(){return x}),n.d(t,"t",function(){return N}),n.d(t,"B",function(){return k}),n.d(t,"f",function(){return D}),n.d(t,"h",function(){return T}),n.d(t,"j",function(){return A}),n.d(t,"i",function(){return M}),n.d(t,"b",function(){return L}),n.d(t,"w",function(){return R}),n.d(t,"u",function(){return H}),n.d(t,"a",function(){return P}),n.d(t,"d",function(){return U}),n.d(t,"l",function(){return B}),n.d(t,"y",function(){return G}),n.d(t,"m",function(){return K}),n.d(t,"v",function(){return F});var s,c=n("./node_modules/lodash/difference.js"),a=n.n(c),r=n("./node_modules/lodash/isEmpty.js"),o=n.n(r),i=n("./src/chat/models/Channel/index.ts"),d=n("./src/chat/selectors/channels.ts"),u=n("./src/chat/selectors/contacts.ts"),l=n("./src/chat/selectors/messages.ts");!function(e){e.Direct="direct",e.Group="group",e.SubredditPublic="room_public",e.SubredditPrivate="room_private"}(s||(s={}));const b=(e,t)=>{switch(e){case i.a.Direct:return s.Direct;case i.a.Group:return s.Group;case i.a.Subreddit:return t?s.SubredditPublic:s.SubredditPrivate}},h=(e,t)=>{const n=t?Object(d.h)(e,t):Object(d.k)(e);return n&&{id:n.channelSendbirdUrl}},f=(e,t)=>{const n=t?Object(d.h)(e,t):Object(d.m)(e);if(n){const e=n.type,t=n.isPublic,s=b(e,t);return s&&{type:s}}},m=e=>{return{type:Object(u.l)(e)>1?s.Group:s.Direct}},O=e=>{const t=Object(u.l)(e);return{number_members:t?t+1:0}},j=(e,t)=>{return{type:(t&&t.length)>2?s.Group:s.Direct}},p=(e,t)=>{return{number_members:E(e,t).members.length}},g=e=>{const t=Object(d.m)(e);return{number_members:t&&t.memberCount}},y=(e,t)=>{const n=Object(l.e)(e,t);return{sender_user_id:n&&n.userId||e.user.account.id}},_=e=>{const t=Object(d.k)(e);return{sender_user_id:t&&t.inviter&&t.inviter.id}},E=(e,t)=>(t.push(e.user.account.id),{members:t}),C=e=>({number_unreads:Object(l.j)(e)}),v=(e,t)=>{const n=Object(d.m)(e),s=n&&n.unreadMessageCount;return{number_unreads:"number"==typeof t?t:s||0}},I=e=>({number_channels:Object(d.r)(e)}),S=e=>({number_channels:Object(d.s)(e)}),w=(e,t)=>{const n=Object(d.m)(e),s=n&&n.type===i.a.Subreddit;return void 0!==t?{number_pending_invites:t?Object(d.p)(e):Object(d.n)(e)}:{number_pending_invites:s?Object(d.p)(e):Object(d.n)(e)}},x=(e,t)=>({message_type:Object(l.g)(e,t)||"text"}),N=(e,t)=>{const n=Object(l.h)(e,t);return n&&{message_type:n.messageData.type}},k=(e,t,n)=>{const s=Object(u.a)(e,t);return{user_added_method:n||(s||null)}},D=e=>{let t=!1;const n=Object(u.f)(e),s=Object(d.f)(e);return n&&n.length&&s&&s.length&&(t=!!s.find(e=>o()(a()(n.sort(),e.sort())))),{existing_channel:t}},T=e=>{const t=Object(d.m)(e);return{invitation_id:t?t.channelSendbirdUrl:null}},A=(e,t)=>{if(t)return{invitation_type:t};const n=Object(d.m)(e),s=n&&b(n.type,n.isPublic);return s&&{invitation_type:s}},M=e=>{const t=Object(d.m)(e);return{invitation_timestamp:t?t.createdAt:null}},L=e=>({blocked_user_id:e||null}),R=e=>({reported_user_id:e||null}),H=e=>{const t=Object(d.m)(e),n=!(!t||t.type!==i.a.Direct),s=Object(d.v)(e),c=s&&s.length&&s[0].id;return{recipient_user_id:n?c:null}},P=(e,t)=>{const n=Object(u.b)(e,t);return{recipient_user_id:n?n.id:null}},U=e=>{const t=Object(u.k)(e);return{recipient_user_id:1===t.length?t[0]:null}},B=e=>({is_member:Object(d.P)(e)}),G=e=>{const t=Object(d.l)(e);return t&&{shown_history:!!t.lastMessage}},K=e=>({message_id:e}),F=e=>({report_reason:e})},"./src/chat/tracking/fields/common.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var s=n("./src/config.ts"),c=n("./src/chat/constants/container.ts"),a=n("./src/chat/selectors/telemetry.ts");const r=e=>({app:{name:e.meta.isRedesign||e.container.size===c.a.FULL?s.a.telemetry.appName.chat2x:s.a.telemetry.appName.chatR2},user:Object(a.e)(e),screen:Object(a.c)(e),session:Object(a.d)(e),referrer:Object(a.b)(e),actionInfo:Object(a.a)(e)})},"./src/chat/tracking/fields/subreddit.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return a});var s=n("./src/chat/selectors/subreddit.ts");const c=e=>{const t=Object(s.b)(e);return t&&{id:t.id}},a=e=>{const t=Object(s.b)(e);return t&&{name:t.name}}},"./src/chat/tracking/sendEvent.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var s=n("./src/telemetry/index.ts"),c=n("./src/chat/helpers/errors.ts");const a=e=>{if(e.session&&e.session.id)try{Object(s.a)(e)}catch(t){Object(c.b)(`Error sending telemetry event: ${t}`)}}},"./src/lib/linkMatchers/index.ts":function(e,t,n){"use strict";var s=n("./node_modules/linkify-it/index.js"),c=n.n(s),a=n("./node_modules/tlds/index.js"),r=n.n(a),o=n("./src/lib/linkMatchers/customLinks.ts"),i=n("./node_modules/lodash/values.js"),d=n.n(i);const u=e=>d()(o.b).includes(e.substring(1)),l=["//","ftp:","http:","https:","mailto:"],b=e=>((e,t)=>(t.forEach(t=>e.add(t,null)),e))(e,l);n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"g",function(){return O}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return y}),n.d(t,"e",function(){return _}),n.d(t,"f",function(){return E});const h=c()().tlds(r.a).set({fuzzyIP:!0}),f=c()().set({fuzzyIP:!0}).add(o.f.mention.prefix,o.f.mention.config),m=b(c()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(o.f.subreddit.prefix,o.f.subreddit.config).add(o.f.subredditFull.prefix,o.f.subreddit.config),O=b(c()()).set({fuzzyLink:!1,fuzzyEmail:!1}).add(o.f.profile.prefix,o.f.profile.config).add(o.f.profileFull.prefix,o.f.profile.config),j=c()().tlds(r.a).set({fuzzyIP:!0}).add(o.f.subreddit.prefix,o.f.subreddit.config).add(o.f.subredditFull.prefix,o.f.subreddit.config).add(o.f.profile.prefix,o.f.profile.config).add(o.f.profileFull.prefix,o.f.profile.config).add(o.f.mention.prefix,o.f.mention.config),p=h.normalize;h.normalize=(e=>{p.call(h,e),!e.schema&&e.url.startsWith("http:")&&(e.url=`https:${e.url.slice(5)}`)});const g=(e,t)=>{return(j.match(e)||[]).filter(e=>{const n=u(e.text);return!n||n&&t})},y=e=>{return[...O.match(e)||[],...f.match(e)||[]].map(e=>!u(e.text)&&e.text.replace(o.a,"")).filter(e=>e)},_=(e,t)=>{const n=e.match(t);if(n&&1===n.length&&0===n[0].index&&n[0].lastIndex===t.length)return n[0]},E=e=>{const t=h.match(e);if(t&&1===t.length&&0===t[0].index){const n=t[0];return n.lastIndex===e.length?n:((e,t)=>{const n=e.substring(t.lastIndex);if(/.*\/\/.*\/.*/.test(t.url)&&/^(\?|\!)+$/.test(n))return t.lastIndex+=n.length,t.url+=n,t})(e,n)}}}}]);
//# sourceMappingURL=Chat~RedesignChat.f9d23a89590611bc22ac.js.map